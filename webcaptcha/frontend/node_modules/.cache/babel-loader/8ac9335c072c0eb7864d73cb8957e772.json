{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.defaultProps = undefined;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _memoizeOne = require('memoize-one');\n\nvar _memoizeOne2 = _interopRequireDefault(_memoizeOne);\n\nvar _Menu = require('./components/Menu');\n\nvar _reactFastCompare = require('./internal/react-fast-compare');\n\nvar _reactFastCompare2 = _interopRequireDefault(_reactFastCompare);\n\nvar _filters = require('./filters');\n\nvar _index = require('./internal/index');\n\nvar _index2 = require('./accessibility/index');\n\nvar _utils = require('./utils');\n\nvar _builtins = require('./builtins');\n\nvar _index3 = require('./components/index');\n\nvar _styles = require('./styles');\n\nvar _theme = require('./theme');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar defaultProps = exports.defaultProps = {\n  backspaceRemovesValue: true,\n  blurInputOnSelect: (0, _utils.isTouchCapable)(),\n  captureMenuScroll: !(0, _utils.isTouchCapable)(),\n  closeMenuOnSelect: true,\n  closeMenuOnScroll: false,\n  components: {},\n  controlShouldRenderValue: true,\n  escapeClearsValue: false,\n  filterOption: (0, _filters.createFilter)(),\n  formatGroupLabel: _builtins.formatGroupLabel,\n  getOptionLabel: _builtins.getOptionLabel,\n  getOptionValue: _builtins.getOptionValue,\n  isDisabled: false,\n  isLoading: false,\n  isMulti: false,\n  isRtl: false,\n  isSearchable: true,\n  isOptionDisabled: _builtins.isOptionDisabled,\n  loadingMessage: function loadingMessage() {\n    return 'Loading...';\n  },\n  maxMenuHeight: 300,\n  minMenuHeight: 140,\n  menuIsOpen: false,\n  menuPlacement: 'bottom',\n  menuPosition: 'absolute',\n  menuShouldBlockScroll: false,\n  menuShouldScrollIntoView: !(0, _utils.isMobileDevice)(),\n  noOptionsMessage: function noOptionsMessage() {\n    return 'No options';\n  },\n  openMenuOnFocus: false,\n  openMenuOnClick: true,\n  options: [],\n  pageSize: 5,\n  placeholder: 'Select...',\n  screenReaderStatus: function screenReaderStatus(_ref) {\n    var count = _ref.count;\n    return count + ' result' + (count !== 1 ? 's' : '') + ' available';\n  },\n  styles: {},\n  tabIndex: '0',\n  tabSelectsValue: true\n};\nvar instanceId = 1;\n\nvar Select = function (_Component) {\n  _inherits(Select, _Component); // Lifecycle\n  // ------------------------------\n  // Refs\n  // ------------------------------\n  // Misc. Instance Properties\n  // ------------------------------\n\n\n  function Select(props) {\n    _classCallCheck(this, Select);\n\n    var _this = _possibleConstructorReturn(this, (Select.__proto__ || Object.getPrototypeOf(Select)).call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var value = props.value;\n    _this.cacheComponents = (0, _memoizeOne2.default)(_this.cacheComponents, _reactFastCompare2.default).bind(_this);\n\n    _this.cacheComponents(props.components);\n\n    _this.instancePrefix = 'react-select-' + (_this.props.instanceId || ++instanceId);\n    var selectValue = (0, _utils.cleanValue)(value);\n\n    var menuOptions = _this.buildMenuOptions(props, selectValue);\n\n    _this.state.menuOptions = menuOptions;\n    _this.state.selectValue = selectValue;\n    return _this;\n  } // TODO\n\n\n  _createClass(Select, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.startListeningComposition();\n      this.startListeningToTouch();\n\n      if (this.props.closeMenuOnScroll && document && document.addEventListener) {\n        // Listen to all scroll events, and filter them out inside of 'onScroll'\n        document.addEventListener('scroll', this.onScroll, true);\n      }\n\n      if (this.props.autoFocus) {\n        this.focusInput();\n      }\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var _props = this.props,\n          options = _props.options,\n          value = _props.value,\n          inputValue = _props.inputValue; // re-cache custom components\n\n      this.cacheComponents(nextProps.components); // rebuild the menu options\n\n      if (nextProps.value !== value || nextProps.options !== options || nextProps.inputValue !== inputValue) {\n        var _selectValue = (0, _utils.cleanValue)(nextProps.value);\n\n        var _menuOptions = this.buildMenuOptions(nextProps, _selectValue);\n\n        var _focusedValue = this.getNextFocusedValue(_selectValue);\n\n        var _focusedOption = this.getNextFocusedOption(_menuOptions.focusable);\n\n        this.setState({\n          menuOptions: _menuOptions,\n          selectValue: _selectValue,\n          focusedOption: _focusedOption,\n          focusedValue: _focusedValue\n        });\n      } // some updates should toggle the state of the input visibility\n\n\n      if (this.inputIsHiddenAfterUpdate != null) {\n        this.setState({\n          inputIsHidden: this.inputIsHiddenAfterUpdate\n        });\n        delete this.inputIsHiddenAfterUpdate;\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      var _props2 = this.props,\n          isDisabled = _props2.isDisabled,\n          menuIsOpen = _props2.menuIsOpen;\n      var isFocused = this.state.isFocused;\n\n      if ( // ensure focus is restored correctly when the control becomes enabled\n      isFocused && !isDisabled && prevProps.isDisabled || // ensure focus is on the Input when the menu opens\n      isFocused && menuIsOpen && !prevProps.menuIsOpen) {\n        this.focusInput();\n      } // scroll the focused option into view if necessary\n\n\n      if (this.menuListRef && this.focusedOptionRef && this.scrollToFocusedOptionOnUpdate) {\n        (0, _utils.scrollIntoView)(this.menuListRef, this.focusedOptionRef);\n      }\n\n      this.scrollToFocusedOptionOnUpdate = false;\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.stopListeningComposition();\n      this.stopListeningToTouch();\n      document.removeEventListener('scroll', this.onScroll, true);\n    }\n  }, {\n    key: 'onMenuOpen',\n    // ==============================\n    // Consumer Handlers\n    // ==============================\n    value: function onMenuOpen() {\n      this.props.onMenuOpen();\n    }\n  }, {\n    key: 'onMenuClose',\n    value: function onMenuClose() {\n      var _props3 = this.props,\n          isSearchable = _props3.isSearchable,\n          isMulti = _props3.isMulti;\n      this.announceAriaLiveContext({\n        event: 'input',\n        context: {\n          isSearchable: isSearchable,\n          isMulti: isMulti\n        }\n      });\n      this.onInputChange('', {\n        action: 'menu-close'\n      });\n      this.props.onMenuClose();\n    }\n  }, {\n    key: 'onInputChange',\n    value: function onInputChange(newValue, actionMeta) {\n      this.props.onInputChange(newValue, actionMeta);\n    } // ==============================\n    // Methods\n    // ==============================\n\n  }, {\n    key: 'focusInput',\n    value: function focusInput() {\n      if (!this.inputRef) return;\n      this.inputRef.focus();\n    }\n  }, {\n    key: 'blurInput',\n    value: function blurInput() {\n      if (!this.inputRef) return;\n      this.inputRef.blur();\n    } // aliased for consumers\n\n  }, {\n    key: 'openMenu',\n    value: function openMenu(focusOption) {\n      var _state = this.state,\n          menuOptions = _state.menuOptions,\n          selectValue = _state.selectValue;\n      var isMulti = this.props.isMulti;\n      var openAtIndex = focusOption === 'first' ? 0 : menuOptions.focusable.length - 1;\n\n      if (!isMulti) {\n        var selectedIndex = menuOptions.focusable.indexOf(selectValue[0]);\n\n        if (selectedIndex > -1) {\n          openAtIndex = selectedIndex;\n        }\n      }\n\n      this.scrollToFocusedOptionOnUpdate = true;\n      this.inputIsHiddenAfterUpdate = false;\n      this.onMenuOpen();\n      this.setState({\n        focusedValue: null,\n        focusedOption: menuOptions.focusable[openAtIndex]\n      });\n      this.announceAriaLiveContext({\n        event: 'menu'\n      });\n    }\n  }, {\n    key: 'focusValue',\n    value: function focusValue(direction) {\n      var _props4 = this.props,\n          isMulti = _props4.isMulti,\n          isSearchable = _props4.isSearchable;\n      var _state2 = this.state,\n          selectValue = _state2.selectValue,\n          focusedValue = _state2.focusedValue; // Only multiselects support value focusing\n\n      if (!isMulti) return;\n      this.setState({\n        focusedOption: null\n      });\n      var focusedIndex = selectValue.indexOf(focusedValue);\n\n      if (!focusedValue) {\n        focusedIndex = -1;\n        this.announceAriaLiveContext({\n          event: 'value'\n        });\n      }\n\n      var lastIndex = selectValue.length - 1;\n      var nextFocus = -1;\n      if (!selectValue.length) return;\n\n      switch (direction) {\n        case 'previous':\n          if (focusedIndex === 0) {\n            // don't cycle from the start to the end\n            nextFocus = 0;\n          } else if (focusedIndex === -1) {\n            // if nothing is focused, focus the last value first\n            nextFocus = lastIndex;\n          } else {\n            nextFocus = focusedIndex - 1;\n          }\n\n          break;\n\n        case 'next':\n          if (focusedIndex > -1 && focusedIndex < lastIndex) {\n            nextFocus = focusedIndex + 1;\n          }\n\n          break;\n      }\n\n      if (nextFocus === -1) {\n        this.announceAriaLiveContext({\n          event: 'input',\n          context: {\n            isSearchable: isSearchable,\n            isMulti: isMulti\n          }\n        });\n      }\n\n      this.setState({\n        inputIsHidden: nextFocus === -1 ? false : true,\n        focusedValue: selectValue[nextFocus]\n      });\n    }\n  }, {\n    key: 'focusOption',\n    value: function focusOption() {\n      var direction = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'first';\n      var pageSize = this.props.pageSize;\n      var _state3 = this.state,\n          focusedOption = _state3.focusedOption,\n          menuOptions = _state3.menuOptions;\n      var options = menuOptions.focusable;\n      if (!options.length) return;\n      var nextFocus = 0; // handles 'first'\n\n      var focusedIndex = options.indexOf(focusedOption);\n\n      if (!focusedOption) {\n        focusedIndex = -1;\n        this.announceAriaLiveContext({\n          event: 'menu'\n        });\n      }\n\n      if (direction === 'up') {\n        nextFocus = focusedIndex > 0 ? focusedIndex - 1 : options.length - 1;\n      } else if (direction === 'down') {\n        nextFocus = (focusedIndex + 1) % options.length;\n      } else if (direction === 'pageup') {\n        nextFocus = focusedIndex - pageSize;\n        if (nextFocus < 0) nextFocus = 0;\n      } else if (direction === 'pagedown') {\n        nextFocus = focusedIndex + pageSize;\n        if (nextFocus > options.length - 1) nextFocus = options.length - 1;\n      } else if (direction === 'last') {\n        nextFocus = options.length - 1;\n      }\n\n      this.scrollToFocusedOptionOnUpdate = true;\n      this.setState({\n        focusedOption: options[nextFocus],\n        focusedValue: null\n      });\n    }\n  }, {\n    key: 'getTheme',\n    // ==============================\n    // Getters\n    // ==============================\n    value: function getTheme() {\n      // Use the default theme if there are no customizations.\n      if (!this.props.theme) {\n        return _theme.defaultTheme;\n      } // If the theme prop is a function, assume the function\n      // knows how to merge the passed-in default theme with\n      // its own modifications.\n\n\n      if (typeof this.props.theme === 'function') {\n        return this.props.theme(_theme.defaultTheme);\n      } // Otherwise, if a plain theme object was passed in,\n      // overlay it with the default theme.\n\n\n      return _extends({}, _theme.defaultTheme, this.props.theme);\n    }\n  }, {\n    key: 'getCommonProps',\n    value: function getCommonProps() {\n      var clearValue = this.clearValue,\n          getStyles = this.getStyles,\n          setValue = this.setValue,\n          selectOption = this.selectOption,\n          props = this.props;\n      var classNamePrefix = props.classNamePrefix,\n          isMulti = props.isMulti,\n          isRtl = props.isRtl,\n          options = props.options;\n      var selectValue = this.state.selectValue;\n      var hasValue = this.hasValue();\n\n      var getValue = function getValue() {\n        return selectValue;\n      };\n\n      var cxPrefix = classNamePrefix;\n\n      var cx = _utils.classNames.bind(null, cxPrefix);\n\n      return {\n        cx: cx,\n        clearValue: clearValue,\n        getStyles: getStyles,\n        getValue: getValue,\n        hasValue: hasValue,\n        isMulti: isMulti,\n        isRtl: isRtl,\n        options: options,\n        selectOption: selectOption,\n        setValue: setValue,\n        selectProps: props,\n        theme: this.getTheme()\n      };\n    }\n  }, {\n    key: 'getNextFocusedValue',\n    value: function getNextFocusedValue(nextSelectValue) {\n      if (this.clearFocusValueOnUpdate) {\n        this.clearFocusValueOnUpdate = false;\n        return null;\n      }\n\n      var _state4 = this.state,\n          focusedValue = _state4.focusedValue,\n          lastSelectValue = _state4.selectValue;\n      var lastFocusedIndex = lastSelectValue.indexOf(focusedValue);\n\n      if (lastFocusedIndex > -1) {\n        var nextFocusedIndex = nextSelectValue.indexOf(focusedValue);\n\n        if (nextFocusedIndex > -1) {\n          // the focused value is still in the selectValue, return it\n          return focusedValue;\n        } else if (lastFocusedIndex < nextSelectValue.length) {\n          // the focusedValue is not present in the next selectValue array by\n          // reference, so return the new value at the same index\n          return nextSelectValue[lastFocusedIndex];\n        }\n      }\n\n      return null;\n    }\n  }, {\n    key: 'getNextFocusedOption',\n    value: function getNextFocusedOption(options) {\n      var lastFocusedOption = this.state.focusedOption;\n      return lastFocusedOption && options.indexOf(lastFocusedOption) > -1 ? lastFocusedOption : options[0];\n    } // ==============================\n    // Helpers\n    // ==============================\n\n  }, {\n    key: 'hasValue',\n    value: function hasValue() {\n      var selectValue = this.state.selectValue;\n      return selectValue.length > 0;\n    }\n  }, {\n    key: 'hasOptions',\n    value: function hasOptions() {\n      return !!this.state.menuOptions.render.length;\n    }\n  }, {\n    key: 'countOptions',\n    value: function countOptions() {\n      return this.state.menuOptions.focusable.length;\n    }\n  }, {\n    key: 'isClearable',\n    value: function isClearable() {\n      var _props5 = this.props,\n          isClearable = _props5.isClearable,\n          isMulti = _props5.isMulti; // single select, by default, IS NOT clearable\n      // multi select, by default, IS clearable\n\n      if (isClearable === undefined) return isMulti;\n      return isClearable;\n    }\n  }, {\n    key: 'isOptionDisabled',\n    value: function isOptionDisabled(option, selectValue) {\n      return typeof this.props.isOptionDisabled === 'function' ? this.props.isOptionDisabled(option, selectValue) : false;\n    }\n  }, {\n    key: 'isOptionSelected',\n    value: function isOptionSelected(option, selectValue) {\n      var _this2 = this;\n\n      if (selectValue.indexOf(option) > -1) return true;\n\n      if (typeof this.props.isOptionSelected === 'function') {\n        return this.props.isOptionSelected(option, selectValue);\n      }\n\n      var candidate = this.getOptionValue(option);\n      return selectValue.some(function (i) {\n        return _this2.getOptionValue(i) === candidate;\n      });\n    }\n  }, {\n    key: 'filterOption',\n    value: function filterOption(option, inputValue) {\n      return this.props.filterOption ? this.props.filterOption(option, inputValue) : true;\n    }\n  }, {\n    key: 'formatOptionLabel',\n    value: function formatOptionLabel(data, context) {\n      if (typeof this.props.formatOptionLabel === 'function') {\n        var _inputValue = this.props.inputValue;\n        var _selectValue2 = this.state.selectValue;\n        return this.props.formatOptionLabel(data, {\n          context: context,\n          inputValue: _inputValue,\n          selectValue: _selectValue2\n        });\n      } else {\n        return this.getOptionLabel(data);\n      }\n    }\n  }, {\n    key: 'formatGroupLabel',\n    value: function formatGroupLabel(data) {\n      return this.props.formatGroupLabel(data);\n    } // ==============================\n    // Mouse Handlers\n    // ==============================\n\n  }, {\n    key: 'startListeningComposition',\n    // ==============================\n    // Composition Handlers\n    // ==============================\n    value: function startListeningComposition() {\n      if (document && document.addEventListener) {\n        document.addEventListener('compositionstart', this.onCompositionStart, false);\n        document.addEventListener('compositionend', this.onCompositionEnd, false);\n      }\n    }\n  }, {\n    key: 'stopListeningComposition',\n    value: function stopListeningComposition() {\n      if (document && document.removeEventListener) {\n        document.removeEventListener('compositionstart', this.onCompositionStart);\n        document.removeEventListener('compositionend', this.onCompositionEnd);\n      }\n    }\n  }, {\n    key: 'startListeningToTouch',\n    // ==============================\n    // Touch Handlers\n    // ==============================\n    value: function startListeningToTouch() {\n      if (document && document.addEventListener) {\n        document.addEventListener('touchstart', this.onTouchStart, false);\n        document.addEventListener('touchmove', this.onTouchMove, false);\n        document.addEventListener('touchend', this.onTouchEnd, false);\n      }\n    }\n  }, {\n    key: 'stopListeningToTouch',\n    value: function stopListeningToTouch() {\n      if (document && document.removeEventListener) {\n        document.removeEventListener('touchstart', this.onTouchStart);\n        document.removeEventListener('touchmove', this.onTouchMove);\n        document.removeEventListener('touchend', this.onTouchEnd);\n      }\n    } // ==============================\n    // Focus Handlers\n    // ==============================\n    // ==============================\n    // Keyboard Handlers\n    // ==============================\n\n  }, {\n    key: 'buildMenuOptions',\n    // ==============================\n    // Menu Options\n    // ==============================\n    value: function buildMenuOptions(props, selectValue) {\n      var _this3 = this;\n\n      var _props$inputValue = props.inputValue,\n          inputValue = _props$inputValue === undefined ? '' : _props$inputValue,\n          options = props.options;\n\n      var toOption = function toOption(option, id) {\n        var isDisabled = _this3.isOptionDisabled(option, selectValue);\n\n        var isSelected = _this3.isOptionSelected(option, selectValue);\n\n        var label = _this3.getOptionLabel(option);\n\n        var value = _this3.getOptionValue(option);\n\n        if (_this3.shouldHideSelectedOptions() && isSelected || !_this3.filterOption({\n          label: label,\n          value: value,\n          data: option\n        }, inputValue)) {\n          return;\n        }\n\n        var onHover = isDisabled ? undefined : function () {\n          return _this3.onOptionHover(option);\n        };\n        var onSelect = isDisabled ? undefined : function () {\n          return _this3.selectOption(option);\n        };\n        var optionId = _this3.getElementId('option') + '-' + id;\n        return {\n          innerProps: {\n            id: optionId,\n            onClick: onSelect,\n            onMouseMove: onHover,\n            onMouseOver: onHover,\n            role: 'option',\n            tabIndex: -1\n          },\n          data: option,\n          isDisabled: isDisabled,\n          isSelected: isSelected,\n          key: optionId,\n          label: label,\n          type: 'option',\n          value: value\n        };\n      };\n\n      return options.reduce(function (acc, item, itemIndex) {\n        if (item.options) {\n          // TODO needs a tidier implementation\n          if (!_this3.hasGroups) _this3.hasGroups = true;\n          var items = item.options;\n          var children = items.map(function (child, i) {\n            var option = toOption(child, itemIndex + '-' + i);\n            if (option && !option.isDisabled) acc.focusable.push(child);\n            return option;\n          }).filter(Boolean);\n\n          if (children.length) {\n            var groupId = _this3.getElementId('group') + '-' + itemIndex;\n            acc.render.push({\n              type: 'group',\n              key: groupId,\n              data: item,\n              options: children\n            });\n          }\n        } else {\n          var option = toOption(item, '' + itemIndex);\n\n          if (option) {\n            acc.render.push(option);\n            if (!option.isDisabled) acc.focusable.push(item);\n          }\n        }\n\n        return acc;\n      }, {\n        render: [],\n        focusable: []\n      });\n    } // ==============================\n    // Renderers\n    // ==============================\n\n  }, {\n    key: 'constructAriaLiveMessage',\n    value: function constructAriaLiveMessage() {\n      var _state5 = this.state,\n          ariaLiveContext = _state5.ariaLiveContext,\n          selectValue = _state5.selectValue,\n          focusedValue = _state5.focusedValue,\n          focusedOption = _state5.focusedOption;\n      var _props6 = this.props,\n          options = _props6.options,\n          menuIsOpen = _props6.menuIsOpen,\n          inputValue = _props6.inputValue,\n          screenReaderStatus = _props6.screenReaderStatus; // An aria live message representing the currently focused value in the select.\n\n      var focusedValueMsg = focusedValue ? (0, _index2.valueFocusAriaMessage)({\n        focusedValue: focusedValue,\n        getOptionLabel: this.getOptionLabel,\n        selectValue: selectValue\n      }) : ''; // An aria live message representing the currently focused option in the select.\n\n      var focusedOptionMsg = focusedOption && menuIsOpen ? (0, _index2.optionFocusAriaMessage)({\n        focusedOption: focusedOption,\n        getOptionLabel: this.getOptionLabel,\n        options: options\n      }) : ''; // An aria live message representing the set of focusable results and current searchterm/inputvalue.\n\n      var resultsMsg = (0, _index2.resultsAriaMessage)({\n        inputValue: inputValue,\n        screenReaderMessage: screenReaderStatus({\n          count: this.countOptions()\n        })\n      });\n      return focusedValueMsg + ' ' + focusedOptionMsg + ' ' + resultsMsg + ' ' + ariaLiveContext;\n    }\n  }, {\n    key: 'renderInput',\n    value: function renderInput() {\n      var _props7 = this.props,\n          isDisabled = _props7.isDisabled,\n          isSearchable = _props7.isSearchable,\n          inputId = _props7.inputId,\n          inputValue = _props7.inputValue,\n          tabIndex = _props7.tabIndex;\n      var Input = this.components.Input;\n      var inputIsHidden = this.state.inputIsHidden;\n      var id = inputId || this.getElementId('input');\n\n      if (!isSearchable) {\n        // use a dummy input to maintain focus/blur functionality\n        return _react2.default.createElement(_index.DummyInput, {\n          id: id,\n          innerRef: this.getInputRef,\n          onBlur: this.onInputBlur,\n          onChange: _utils.noop,\n          onFocus: this.onInputFocus,\n          readOnly: true,\n          disabled: isDisabled,\n          tabIndex: tabIndex,\n          value: ''\n        });\n      } // aria attributes makes the JSX \"noisy\", separated for clarity\n\n\n      var ariaAttributes = {\n        'aria-autocomplete': 'list',\n        'aria-label': this.props['aria-label'],\n        'aria-labelledby': this.props['aria-labelledby']\n      };\n      var _commonProps = this.commonProps,\n          cx = _commonProps.cx,\n          theme = _commonProps.theme,\n          selectProps = _commonProps.selectProps;\n      return _react2.default.createElement(Input, _extends({\n        autoCapitalize: 'none',\n        autoComplete: 'off',\n        autoCorrect: 'off',\n        cx: cx,\n        getStyles: this.getStyles,\n        id: id,\n        innerRef: this.getInputRef,\n        isDisabled: isDisabled,\n        isHidden: inputIsHidden,\n        onBlur: this.onInputBlur,\n        onChange: this.handleInputChange,\n        onFocus: this.onInputFocus,\n        selectProps: selectProps,\n        spellCheck: 'false',\n        tabIndex: tabIndex,\n        theme: theme,\n        type: 'text',\n        value: inputValue\n      }, ariaAttributes));\n    }\n  }, {\n    key: 'renderPlaceholderOrValue',\n    value: function renderPlaceholderOrValue() {\n      var _this4 = this;\n\n      var _components = this.components,\n          MultiValue = _components.MultiValue,\n          MultiValueContainer = _components.MultiValueContainer,\n          MultiValueLabel = _components.MultiValueLabel,\n          MultiValueRemove = _components.MultiValueRemove,\n          SingleValue = _components.SingleValue,\n          Placeholder = _components.Placeholder;\n      var commonProps = this.commonProps;\n      var _props8 = this.props,\n          controlShouldRenderValue = _props8.controlShouldRenderValue,\n          isDisabled = _props8.isDisabled,\n          isMulti = _props8.isMulti,\n          inputValue = _props8.inputValue,\n          placeholder = _props8.placeholder;\n      var _state6 = this.state,\n          selectValue = _state6.selectValue,\n          focusedValue = _state6.focusedValue,\n          isFocused = _state6.isFocused;\n\n      if (!this.hasValue() || !controlShouldRenderValue) {\n        return inputValue ? null : _react2.default.createElement(Placeholder, _extends({}, commonProps, {\n          key: 'placeholder',\n          isDisabled: isDisabled,\n          isFocused: isFocused\n        }), placeholder);\n      }\n\n      if (isMulti) {\n        var selectValues = selectValue.map(function (opt) {\n          var isFocused = opt === focusedValue;\n          return _react2.default.createElement(MultiValue, _extends({}, commonProps, {\n            components: {\n              Container: MultiValueContainer,\n              Label: MultiValueLabel,\n              Remove: MultiValueRemove\n            },\n            isFocused: isFocused,\n            isDisabled: isDisabled,\n            key: _this4.getOptionValue(opt),\n            removeProps: {\n              onClick: function onClick() {\n                return _this4.removeValue(opt);\n              },\n              onTouchEnd: function onTouchEnd() {\n                return _this4.removeValue(opt);\n              },\n              onMouseDown: function onMouseDown(e) {\n                e.preventDefault();\n                e.stopPropagation();\n              }\n            },\n            data: opt\n          }), _this4.formatOptionLabel(opt, 'value'));\n        });\n        return selectValues;\n      }\n\n      if (inputValue) {\n        return null;\n      }\n\n      var singleValue = selectValue[0];\n      return _react2.default.createElement(SingleValue, _extends({}, commonProps, {\n        data: singleValue,\n        isDisabled: isDisabled\n      }), this.formatOptionLabel(singleValue, 'value'));\n    }\n  }, {\n    key: 'renderClearIndicator',\n    value: function renderClearIndicator() {\n      var ClearIndicator = this.components.ClearIndicator;\n      var commonProps = this.commonProps;\n      var _props9 = this.props,\n          isDisabled = _props9.isDisabled,\n          isLoading = _props9.isLoading;\n      var isFocused = this.state.isFocused;\n\n      if (!this.isClearable() || !ClearIndicator || isDisabled || !this.hasValue() || isLoading) {\n        return null;\n      }\n\n      var innerProps = {\n        onMouseDown: this.onClearIndicatorMouseDown,\n        onTouchEnd: this.onClearIndicatorTouchEnd,\n        'aria-hidden': 'true'\n      };\n      return _react2.default.createElement(ClearIndicator, _extends({}, commonProps, {\n        innerProps: innerProps,\n        isFocused: isFocused\n      }));\n    }\n  }, {\n    key: 'renderLoadingIndicator',\n    value: function renderLoadingIndicator() {\n      var LoadingIndicator = this.components.LoadingIndicator;\n      var commonProps = this.commonProps;\n      var _props10 = this.props,\n          isDisabled = _props10.isDisabled,\n          isLoading = _props10.isLoading;\n      var isFocused = this.state.isFocused;\n      if (!LoadingIndicator || !isLoading) return null;\n      var innerProps = {\n        'aria-hidden': 'true'\n      };\n      return _react2.default.createElement(LoadingIndicator, _extends({}, commonProps, {\n        innerProps: innerProps,\n        isDisabled: isDisabled,\n        isFocused: isFocused\n      }));\n    }\n  }, {\n    key: 'renderIndicatorSeparator',\n    value: function renderIndicatorSeparator() {\n      var _components2 = this.components,\n          DropdownIndicator = _components2.DropdownIndicator,\n          IndicatorSeparator = _components2.IndicatorSeparator; // separator doesn't make sense without the dropdown indicator\n\n      if (!DropdownIndicator || !IndicatorSeparator) return null;\n      var commonProps = this.commonProps;\n      var isDisabled = this.props.isDisabled;\n      var isFocused = this.state.isFocused;\n      return _react2.default.createElement(IndicatorSeparator, _extends({}, commonProps, {\n        isDisabled: isDisabled,\n        isFocused: isFocused\n      }));\n    }\n  }, {\n    key: 'renderDropdownIndicator',\n    value: function renderDropdownIndicator() {\n      var DropdownIndicator = this.components.DropdownIndicator;\n      if (!DropdownIndicator) return null;\n      var commonProps = this.commonProps;\n      var isDisabled = this.props.isDisabled;\n      var isFocused = this.state.isFocused;\n      var innerProps = {\n        onMouseDown: this.onDropdownIndicatorMouseDown,\n        onTouchEnd: this.onDropdownIndicatorTouchEnd,\n        'aria-hidden': 'true'\n      };\n      return _react2.default.createElement(DropdownIndicator, _extends({}, commonProps, {\n        innerProps: innerProps,\n        isDisabled: isDisabled,\n        isFocused: isFocused\n      }));\n    }\n  }, {\n    key: 'renderMenu',\n    value: function renderMenu() {\n      var _this5 = this;\n\n      var _components3 = this.components,\n          Group = _components3.Group,\n          GroupHeading = _components3.GroupHeading,\n          Menu = _components3.Menu,\n          MenuList = _components3.MenuList,\n          MenuPortal = _components3.MenuPortal,\n          LoadingMessage = _components3.LoadingMessage,\n          NoOptionsMessage = _components3.NoOptionsMessage,\n          Option = _components3.Option;\n      var commonProps = this.commonProps;\n      var _state7 = this.state,\n          focusedOption = _state7.focusedOption,\n          menuOptions = _state7.menuOptions;\n      var _props11 = this.props,\n          captureMenuScroll = _props11.captureMenuScroll,\n          inputValue = _props11.inputValue,\n          isLoading = _props11.isLoading,\n          loadingMessage = _props11.loadingMessage,\n          minMenuHeight = _props11.minMenuHeight,\n          maxMenuHeight = _props11.maxMenuHeight,\n          menuIsOpen = _props11.menuIsOpen,\n          menuPlacement = _props11.menuPlacement,\n          menuPosition = _props11.menuPosition,\n          menuPortalTarget = _props11.menuPortalTarget,\n          menuShouldBlockScroll = _props11.menuShouldBlockScroll,\n          menuShouldScrollIntoView = _props11.menuShouldScrollIntoView,\n          noOptionsMessage = _props11.noOptionsMessage,\n          onMenuScrollToTop = _props11.onMenuScrollToTop,\n          onMenuScrollToBottom = _props11.onMenuScrollToBottom;\n      if (!menuIsOpen) return null; // TODO: Internal Option Type here\n\n      var render = function render(props) {\n        // for performance, the menu options in state aren't changed when the\n        // focused option changes so we calculate additional props based on that\n        var isFocused = focusedOption === props.data;\n        props.innerRef = isFocused ? _this5.getFocusedOptionRef : undefined;\n        return _react2.default.createElement(Option, _extends({}, commonProps, props, {\n          isFocused: isFocused\n        }), _this5.formatOptionLabel(props.data, 'menu'));\n      };\n\n      var menuUI = void 0;\n\n      if (this.hasOptions()) {\n        menuUI = menuOptions.render.map(function (item) {\n          if (item.type === 'group') {\n            var type = item.type,\n                group = _objectWithoutProperties(item, ['type']);\n\n            var headingId = item.key + '-heading';\n            return _react2.default.createElement(Group, _extends({}, commonProps, group, {\n              Heading: GroupHeading,\n              headingProps: {\n                id: headingId\n              },\n              label: _this5.formatGroupLabel(item.data)\n            }), item.options.map(function (option) {\n              return render(option);\n            }));\n          } else if (item.type === 'option') {\n            return render(item);\n          }\n        });\n      } else if (isLoading) {\n        var message = loadingMessage({\n          inputValue: inputValue\n        });\n        if (message === null) return null;\n        menuUI = _react2.default.createElement(LoadingMessage, commonProps, message);\n      } else {\n        var _message = noOptionsMessage({\n          inputValue: inputValue\n        });\n\n        if (_message === null) return null;\n        menuUI = _react2.default.createElement(NoOptionsMessage, commonProps, _message);\n      }\n\n      var menuPlacementProps = {\n        minMenuHeight: minMenuHeight,\n        maxMenuHeight: maxMenuHeight,\n        menuPlacement: menuPlacement,\n        menuPosition: menuPosition,\n        menuShouldScrollIntoView: menuShouldScrollIntoView\n      };\n\n      var menuElement = _react2.default.createElement(_Menu.MenuPlacer, _extends({}, commonProps, menuPlacementProps), function (_ref2) {\n        var ref = _ref2.ref,\n            _ref2$placerProps = _ref2.placerProps,\n            placement = _ref2$placerProps.placement,\n            maxHeight = _ref2$placerProps.maxHeight;\n        return _react2.default.createElement(Menu, _extends({}, commonProps, menuPlacementProps, {\n          innerRef: ref,\n          innerProps: {\n            onMouseDown: _this5.onMenuMouseDown,\n            onMouseMove: _this5.onMenuMouseMove\n          },\n          isLoading: isLoading,\n          placement: placement\n        }), _react2.default.createElement(_index.ScrollCaptor, {\n          isEnabled: captureMenuScroll,\n          onTopArrive: onMenuScrollToTop,\n          onBottomArrive: onMenuScrollToBottom\n        }, _react2.default.createElement(_index.ScrollBlock, {\n          isEnabled: menuShouldBlockScroll\n        }, _react2.default.createElement(MenuList, _extends({}, commonProps, {\n          innerRef: _this5.getMenuListRef,\n          isLoading: isLoading,\n          maxHeight: maxHeight\n        }), menuUI))));\n      }); // positioning behaviour is almost identical for portalled and fixed,\n      // so we use the same component. the actual portalling logic is forked\n      // within the component based on `menuPosition`\n\n\n      return menuPortalTarget || menuPosition === 'fixed' ? _react2.default.createElement(MenuPortal, _extends({}, commonProps, {\n        appendTo: menuPortalTarget,\n        controlElement: this.controlRef,\n        menuPlacement: menuPlacement,\n        menuPosition: menuPosition\n      }), menuElement) : menuElement;\n    }\n  }, {\n    key: 'renderFormField',\n    value: function renderFormField() {\n      var _this6 = this;\n\n      var _props12 = this.props,\n          delimiter = _props12.delimiter,\n          isDisabled = _props12.isDisabled,\n          isMulti = _props12.isMulti,\n          name = _props12.name;\n      var selectValue = this.state.selectValue;\n      if (!name || isDisabled) return;\n\n      if (isMulti) {\n        if (delimiter) {\n          var _value = selectValue.map(function (opt) {\n            return _this6.getOptionValue(opt);\n          }).join(delimiter);\n\n          return _react2.default.createElement('input', {\n            name: name,\n            type: 'hidden',\n            value: _value\n          });\n        } else {\n          var input = selectValue.length > 0 ? selectValue.map(function (opt, i) {\n            return _react2.default.createElement('input', {\n              key: 'i-' + i,\n              name: name,\n              type: 'hidden',\n              value: _this6.getOptionValue(opt)\n            });\n          }) : _react2.default.createElement('input', {\n            name: name,\n            type: 'hidden'\n          });\n          return _react2.default.createElement('div', null, input);\n        }\n      } else {\n        var _value2 = selectValue[0] ? this.getOptionValue(selectValue[0]) : '';\n\n        return _react2.default.createElement('input', {\n          name: name,\n          type: 'hidden',\n          value: _value2\n        });\n      }\n    }\n  }, {\n    key: 'renderLiveRegion',\n    value: function renderLiveRegion() {\n      if (!this.state.isFocused) return null;\n      return _react2.default.createElement(_index.A11yText, {\n        'aria-live': 'assertive'\n      }, _react2.default.createElement('p', {\n        id: 'aria-selection-event'\n      }, '\\xA0', this.state.ariaLiveSelection), _react2.default.createElement('p', {\n        id: 'aria-context'\n      }, '\\xA0', this.constructAriaLiveMessage()));\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _components4 = this.components,\n          Control = _components4.Control,\n          IndicatorsContainer = _components4.IndicatorsContainer,\n          SelectContainer = _components4.SelectContainer,\n          ValueContainer = _components4.ValueContainer;\n      var _props13 = this.props,\n          className = _props13.className,\n          id = _props13.id,\n          isDisabled = _props13.isDisabled,\n          menuIsOpen = _props13.menuIsOpen;\n      var isFocused = this.state.isFocused;\n      var commonProps = this.commonProps = this.getCommonProps();\n      return _react2.default.createElement(SelectContainer, _extends({}, commonProps, {\n        className: className,\n        innerProps: {\n          id: id,\n          onKeyDown: this.onKeyDown\n        },\n        isDisabled: isDisabled,\n        isFocused: isFocused\n      }), this.renderLiveRegion(), _react2.default.createElement(Control, _extends({}, commonProps, {\n        innerRef: this.getControlRef,\n        innerProps: {\n          onMouseDown: this.onControlMouseDown,\n          onTouchEnd: this.onControlTouchEnd\n        },\n        isDisabled: isDisabled,\n        isFocused: isFocused,\n        menuIsOpen: menuIsOpen\n      }), _react2.default.createElement(ValueContainer, _extends({}, commonProps, {\n        isDisabled: isDisabled\n      }), this.renderPlaceholderOrValue(), this.renderInput()), _react2.default.createElement(IndicatorsContainer, _extends({}, commonProps, {\n        isDisabled: isDisabled\n      }), this.renderClearIndicator(), this.renderLoadingIndicator(), this.renderIndicatorSeparator(), this.renderDropdownIndicator())), this.renderMenu(), this.renderFormField());\n    }\n  }]);\n\n  return Select;\n}(_react.Component);\n\nSelect.defaultProps = defaultProps;\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this7 = this;\n\n  this.state = {\n    ariaLiveSelection: '',\n    ariaLiveContext: '',\n    focusedOption: null,\n    focusedValue: null,\n    inputIsHidden: false,\n    isFocused: false,\n    isComposing: false,\n    menuOptions: {\n      render: [],\n      focusable: []\n    },\n    selectValue: []\n  };\n  this.blockOptionHover = false;\n  this.clearFocusValueOnUpdate = false;\n  this.hasGroups = false;\n  this.initialTouchX = 0;\n  this.initialTouchY = 0;\n  this.instancePrefix = '';\n  this.openAfterFocus = false;\n  this.scrollToFocusedOptionOnUpdate = false;\n  this.controlRef = null;\n\n  this.getControlRef = function (ref) {\n    _this7.controlRef = ref;\n  };\n\n  this.focusedOptionRef = null;\n\n  this.getFocusedOptionRef = function (ref) {\n    _this7.focusedOptionRef = ref;\n  };\n\n  this.menuListRef = null;\n\n  this.getMenuListRef = function (ref) {\n    _this7.menuListRef = ref;\n  };\n\n  this.inputRef = null;\n\n  this.getInputRef = function (ref) {\n    _this7.inputRef = ref;\n  };\n\n  this.cacheComponents = function (components) {\n    _this7.components = (0, _index3.defaultComponents)({\n      components: components\n    });\n  };\n\n  this.focus = this.focusInput;\n  this.blur = this.blurInput;\n\n  this.onChange = function (newValue, actionMeta) {\n    var _props14 = _this7.props,\n        onChange = _props14.onChange,\n        name = _props14.name;\n    onChange(newValue, _extends({}, actionMeta, {\n      name: name\n    }));\n  };\n\n  this.setValue = function (newValue) {\n    var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'set-value';\n    var option = arguments[2];\n    var _props15 = _this7.props,\n        closeMenuOnSelect = _props15.closeMenuOnSelect,\n        isMulti = _props15.isMulti;\n\n    _this7.onInputChange('', {\n      action: 'set-value'\n    });\n\n    if (closeMenuOnSelect) {\n      _this7.inputIsHiddenAfterUpdate = !isMulti;\n\n      _this7.onMenuClose();\n    } // when the select value should change, we should reset focusedValue\n\n\n    _this7.clearFocusValueOnUpdate = true;\n\n    _this7.onChange(newValue, {\n      action: action,\n      option: option\n    });\n  };\n\n  this.selectOption = function (newValue) {\n    var _props16 = _this7.props,\n        blurInputOnSelect = _props16.blurInputOnSelect,\n        isMulti = _props16.isMulti;\n\n    if (isMulti) {\n      var _selectValue3 = _this7.state.selectValue;\n\n      if (_this7.isOptionSelected(newValue, _selectValue3)) {\n        var candidate = _this7.getOptionValue(newValue);\n\n        _this7.setValue(_selectValue3.filter(function (i) {\n          return _this7.getOptionValue(i) !== candidate;\n        }), 'deselect-option', newValue);\n\n        _this7.announceAriaLiveSelection({\n          event: 'deselect-option',\n          context: {\n            value: _this7.getOptionLabel(newValue)\n          }\n        });\n      } else {\n        _this7.setValue([].concat(_toConsumableArray(_selectValue3), [newValue]), 'select-option', newValue);\n\n        _this7.announceAriaLiveSelection({\n          event: 'select-option',\n          context: {\n            value: _this7.getOptionLabel(newValue)\n          }\n        });\n      }\n    } else {\n      _this7.setValue(newValue, 'select-option');\n\n      _this7.announceAriaLiveSelection({\n        event: 'select-option',\n        context: {\n          value: _this7.getOptionLabel(newValue)\n        }\n      });\n    }\n\n    if (blurInputOnSelect) {\n      _this7.blurInput();\n    }\n  };\n\n  this.removeValue = function (removedValue) {\n    var selectValue = _this7.state.selectValue;\n\n    var candidate = _this7.getOptionValue(removedValue);\n\n    _this7.onChange(selectValue.filter(function (i) {\n      return _this7.getOptionValue(i) !== candidate;\n    }), {\n      action: 'remove-value',\n      removedValue: removedValue\n    });\n\n    _this7.announceAriaLiveSelection({\n      event: 'remove-value',\n      context: {\n        value: removedValue ? _this7.getOptionLabel(removedValue) : undefined\n      }\n    });\n\n    _this7.focusInput();\n  };\n\n  this.clearValue = function () {\n    var isMulti = _this7.props.isMulti;\n\n    _this7.onChange(isMulti ? [] : null, {\n      action: 'clear'\n    });\n  };\n\n  this.popValue = function () {\n    var selectValue = _this7.state.selectValue;\n    var lastSelectedValue = selectValue[selectValue.length - 1];\n\n    _this7.announceAriaLiveSelection({\n      event: 'pop-value',\n      context: {\n        value: lastSelectedValue ? _this7.getOptionLabel(lastSelectedValue) : undefined\n      }\n    });\n\n    _this7.onChange(selectValue.slice(0, selectValue.length - 1), {\n      action: 'pop-value',\n      removedValue: lastSelectedValue\n    });\n  };\n\n  this.getOptionLabel = function (data) {\n    return _this7.props.getOptionLabel(data);\n  };\n\n  this.getOptionValue = function (data) {\n    return _this7.props.getOptionValue(data);\n  };\n\n  this.getStyles = function (key, props) {\n    var base = _styles.defaultStyles[key](props);\n\n    base.boxSizing = 'border-box';\n    var custom = _this7.props.styles[key];\n    return custom ? custom(base, props) : base;\n  };\n\n  this.getElementId = function (element) {\n    return _this7.instancePrefix + '-' + element;\n  };\n\n  this.getActiveDescendentId = function () {\n    var menuIsOpen = _this7.props.menuIsOpen;\n    var _state8 = _this7.state,\n        menuOptions = _state8.menuOptions,\n        focusedOption = _state8.focusedOption;\n    if (!focusedOption || !menuIsOpen) return undefined;\n    var index = menuOptions.focusable.indexOf(focusedOption);\n    var option = menuOptions.render[index];\n    return option && option.key;\n  };\n\n  this.announceAriaLiveSelection = function (_ref3) {\n    var event = _ref3.event,\n        context = _ref3.context;\n\n    _this7.setState({\n      ariaLiveSelection: (0, _index2.valueEventAriaMessage)(event, context)\n    });\n  };\n\n  this.announceAriaLiveContext = function (_ref4) {\n    var event = _ref4.event,\n        context = _ref4.context;\n\n    _this7.setState({\n      ariaLiveContext: (0, _index2.instructionsAriaMessage)(event, _extends({}, context, {\n        label: _this7.props['aria-label']\n      }))\n    });\n  };\n\n  this.onMenuMouseDown = function (event) {\n    if (event.button !== 0) {\n      return;\n    }\n\n    event.stopPropagation();\n    event.preventDefault();\n\n    _this7.focusInput();\n  };\n\n  this.onMenuMouseMove = function (event) {\n    _this7.blockOptionHover = false;\n  };\n\n  this.onControlMouseDown = function (event) {\n    var openMenuOnClick = _this7.props.openMenuOnClick;\n\n    if (!_this7.state.isFocused) {\n      if (openMenuOnClick) {\n        _this7.openAfterFocus = true;\n      }\n\n      _this7.focusInput();\n    } else if (!_this7.props.menuIsOpen) {\n      _this7.openMenu('first');\n    } else {\n      // $FlowFixMe HTMLElement type does not have tagName property\n      if (event.target.tagName !== 'INPUT') {\n        _this7.onMenuClose();\n      }\n    } // $FlowFixMe HTMLElement type does not have tagName property\n\n\n    if (event.target.tagName !== 'INPUT') {\n      event.preventDefault();\n    }\n  };\n\n  this.onDropdownIndicatorMouseDown = function (event) {\n    // ignore mouse events that weren't triggered by the primary button\n    if (event && event.type === 'mousedown' && event.button !== 0) {\n      return;\n    }\n\n    if (_this7.props.isDisabled) return;\n    var _props17 = _this7.props,\n        isMulti = _props17.isMulti,\n        menuIsOpen = _props17.menuIsOpen;\n\n    _this7.focusInput();\n\n    if (menuIsOpen) {\n      _this7.inputIsHiddenAfterUpdate = !isMulti;\n\n      _this7.onMenuClose();\n    } else {\n      _this7.openMenu('first');\n    }\n\n    event.preventDefault();\n    event.stopPropagation();\n  };\n\n  this.onClearIndicatorMouseDown = function (event) {\n    // ignore mouse events that weren't triggered by the primary button\n    if (event && event.type === 'mousedown' && event.button !== 0) {\n      return;\n    }\n\n    _this7.clearValue();\n\n    event.stopPropagation();\n    _this7.openAfterFocus = false;\n    setTimeout(function () {\n      return _this7.focusInput();\n    });\n  };\n\n  this.onScroll = function (event) {\n    if (typeof _this7.props.closeMenuOnScroll === 'boolean') {\n      if (event.target instanceof HTMLElement && (0, _utils.isDocumentElement)(event.target)) {\n        _this7.props.onMenuClose();\n      }\n    } else if (typeof _this7.props.closeMenuOnScroll === 'function') {\n      if (_this7.props.closeMenuOnScroll(event)) {\n        _this7.props.onMenuClose();\n      }\n    }\n  };\n\n  this.onCompositionStart = function () {\n    _this7.setState({\n      isComposing: true\n    });\n  };\n\n  this.onCompositionEnd = function () {\n    _this7.setState({\n      isComposing: false\n    });\n  };\n\n  this.onTouchStart = function (_ref5) {\n    var touches = _ref5.touches;\n    var touch = touches.item(0);\n\n    if (!touch) {\n      return;\n    }\n\n    _this7.initialTouchX = touch.clientX;\n    _this7.initialTouchY = touch.clientY;\n    _this7.userIsDragging = false;\n  };\n\n  this.onTouchMove = function (_ref6) {\n    var touches = _ref6.touches;\n    var touch = touches.item(0);\n\n    if (!touch) {\n      return;\n    }\n\n    var deltaX = Math.abs(touch.clientX - _this7.initialTouchX);\n    var deltaY = Math.abs(touch.clientY - _this7.initialTouchY);\n    var moveThreshold = 5;\n    _this7.userIsDragging = deltaX > moveThreshold || deltaY > moveThreshold;\n  };\n\n  this.onTouchEnd = function (event) {\n    if (_this7.userIsDragging) return; // type cast the EventTarget\n\n    var target = event.target; // close the menu if the user taps outside\n\n    if (_this7.controlRef && !_this7.controlRef.contains(target) && _this7.menuListRef && !_this7.menuListRef.contains(target)) {\n      _this7.blurInput();\n    } // reset move vars\n\n\n    _this7.initialTouchX = 0;\n    _this7.initialTouchY = 0;\n  };\n\n  this.onControlTouchEnd = function (event) {\n    if (_this7.userIsDragging) return;\n\n    _this7.onControlMouseDown(event);\n  };\n\n  this.onClearIndicatorTouchEnd = function (event) {\n    if (_this7.userIsDragging) return;\n\n    _this7.onClearIndicatorMouseDown(event);\n  };\n\n  this.onDropdownIndicatorTouchEnd = function (event) {\n    if (_this7.userIsDragging) return;\n\n    _this7.onDropdownIndicatorMouseDown(event);\n  };\n\n  this.handleInputChange = function (event) {\n    var inputValue = event.currentTarget.value;\n    _this7.inputIsHiddenAfterUpdate = false;\n\n    _this7.onInputChange(inputValue, {\n      action: 'input-change'\n    });\n\n    _this7.onMenuOpen();\n  };\n\n  this.onInputFocus = function (event) {\n    var _props18 = _this7.props,\n        isSearchable = _props18.isSearchable,\n        isMulti = _props18.isMulti;\n\n    if (_this7.props.onFocus) {\n      _this7.props.onFocus(event);\n    }\n\n    _this7.inputIsHiddenAfterUpdate = false;\n\n    _this7.announceAriaLiveContext({\n      event: 'input',\n      context: {\n        isSearchable: isSearchable,\n        isMulti: isMulti\n      }\n    });\n\n    _this7.setState({\n      isFocused: true\n    });\n\n    if (_this7.openAfterFocus || _this7.props.openMenuOnFocus) {\n      _this7.openMenu('first');\n    }\n\n    _this7.openAfterFocus = false;\n  };\n\n  this.onInputBlur = function (event) {\n    if (_this7.menuListRef && _this7.menuListRef.contains(document.activeElement)) {\n      _this7.inputRef.focus();\n\n      return;\n    }\n\n    if (_this7.props.onBlur) {\n      _this7.props.onBlur(event);\n    }\n\n    _this7.onInputChange('', {\n      action: 'input-blur'\n    });\n\n    _this7.onMenuClose();\n\n    _this7.setState({\n      focusedValue: null,\n      isFocused: false\n    });\n  };\n\n  this.onOptionHover = function (focusedOption) {\n    if (_this7.blockOptionHover || _this7.state.focusedOption === focusedOption) {\n      return;\n    }\n\n    _this7.setState({\n      focusedOption: focusedOption\n    });\n  };\n\n  this.shouldHideSelectedOptions = function () {\n    var _props19 = _this7.props,\n        hideSelectedOptions = _props19.hideSelectedOptions,\n        isMulti = _props19.isMulti;\n    if (hideSelectedOptions === undefined) return isMulti;\n    return hideSelectedOptions;\n  };\n\n  this.onKeyDown = function (event) {\n    var _props20 = _this7.props,\n        isMulti = _props20.isMulti,\n        backspaceRemovesValue = _props20.backspaceRemovesValue,\n        escapeClearsValue = _props20.escapeClearsValue,\n        inputValue = _props20.inputValue,\n        isClearable = _props20.isClearable,\n        isDisabled = _props20.isDisabled,\n        menuIsOpen = _props20.menuIsOpen,\n        onKeyDown = _props20.onKeyDown,\n        tabSelectsValue = _props20.tabSelectsValue,\n        openMenuOnFocus = _props20.openMenuOnFocus;\n    var _state9 = _this7.state,\n        isComposing = _state9.isComposing,\n        focusedOption = _state9.focusedOption,\n        focusedValue = _state9.focusedValue,\n        selectValue = _state9.selectValue;\n    if (isDisabled) return;\n\n    if (typeof onKeyDown === 'function') {\n      onKeyDown(event);\n\n      if (event.defaultPrevented) {\n        return;\n      }\n    } // Block option hover events when the user has just pressed a key\n\n\n    _this7.blockOptionHover = true;\n\n    switch (event.key) {\n      case 'ArrowLeft':\n        if (!isMulti || inputValue) return;\n\n        _this7.focusValue('previous');\n\n        break;\n\n      case 'ArrowRight':\n        if (!isMulti || inputValue) return;\n\n        _this7.focusValue('next');\n\n        break;\n\n      case 'Delete':\n      case 'Backspace':\n        if (inputValue) return;\n\n        if (focusedValue) {\n          _this7.removeValue(focusedValue);\n        } else {\n          if (!backspaceRemovesValue) return;\n\n          if (isMulti) {\n            _this7.popValue();\n          } else if (isClearable) {\n            _this7.clearValue();\n          }\n        }\n\n        break;\n\n      case 'Tab':\n        if (isComposing) return;\n\n        if (event.shiftKey || !menuIsOpen || !tabSelectsValue || !focusedOption || // don't capture the event if the menu opens on focus and the focused\n        // option is already selected; it breaks the flow of navigation\n        openMenuOnFocus && _this7.isOptionSelected(focusedOption, selectValue)) {\n          return;\n        }\n\n        _this7.selectOption(focusedOption);\n\n        break;\n\n      case 'Enter':\n        if (menuIsOpen) {\n          if (!focusedOption) return;\n          if (isComposing) return;\n\n          _this7.selectOption(focusedOption);\n        } else {\n          _this7.focusOption('first');\n        }\n\n        break;\n\n      case 'Escape':\n        if (menuIsOpen) {\n          _this7.inputIsHiddenAfterUpdate = false;\n\n          _this7.onInputChange('', {\n            action: 'menu-close'\n          });\n\n          _this7.onMenuClose();\n        } else if (isClearable && escapeClearsValue) {\n          _this7.clearValue();\n        }\n\n        break;\n\n      case ' ':\n        // space\n        if (inputValue) {\n          return;\n        }\n\n        if (!menuIsOpen) {\n          _this7.openMenu('first');\n\n          break;\n        }\n\n        if (!focusedOption) return;\n\n        _this7.selectOption(focusedOption);\n\n        break;\n\n      case 'ArrowUp':\n        if (menuIsOpen) {\n          _this7.focusOption('up');\n        } else {\n          _this7.openMenu('last');\n        }\n\n        break;\n\n      case 'ArrowDown':\n        if (menuIsOpen) {\n          _this7.focusOption('down');\n        } else {\n          _this7.openMenu('first');\n        }\n\n        break;\n\n      case 'PageUp':\n        if (!menuIsOpen) return;\n\n        _this7.focusOption('pageup');\n\n        break;\n\n      case 'PageDown':\n        if (!menuIsOpen) return;\n\n        _this7.focusOption('pagedown');\n\n        break;\n\n      case 'Home':\n        if (!menuIsOpen) return;\n\n        _this7.focusOption('first');\n\n        break;\n\n      case 'End':\n        if (!menuIsOpen) return;\n\n        _this7.focusOption('last');\n\n        break;\n\n      default:\n        return;\n    }\n\n    event.preventDefault();\n  };\n};\n\nexports.default = Select;","map":{"version":3,"sources":["/Users/pnasc/Desktop/hackauthon/team-418-teapot/webcaptcha/node_modules/react-select/lib/Select.js"],"names":["Object","defineProperty","exports","value","defaultProps","undefined","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","require","_react2","_interopRequireDefault","_memoizeOne","_memoizeOne2","_Menu","_reactFastCompare","_reactFastCompare2","_filters","_index","_index2","_utils","_builtins","_index3","_styles","_theme","obj","__esModule","default","_toConsumableArray","arr","Array","isArray","arr2","from","_objectWithoutProperties","keys","indexOf","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","backspaceRemovesValue","blurInputOnSelect","isTouchCapable","captureMenuScroll","closeMenuOnSelect","closeMenuOnScroll","components","controlShouldRenderValue","escapeClearsValue","filterOption","createFilter","formatGroupLabel","getOptionLabel","getOptionValue","isDisabled","isLoading","isMulti","isRtl","isSearchable","isOptionDisabled","loadingMessage","maxMenuHeight","minMenuHeight","menuIsOpen","menuPlacement","menuPosition","menuShouldBlockScroll","menuShouldScrollIntoView","isMobileDevice","noOptionsMessage","openMenuOnFocus","openMenuOnClick","options","pageSize","placeholder","screenReaderStatus","_ref","count","styles","tabIndex","tabSelectsValue","instanceId","Select","_Component","_this","getPrototypeOf","_initialiseProps","cacheComponents","bind","instancePrefix","selectValue","cleanValue","menuOptions","buildMenuOptions","state","componentDidMount","startListeningComposition","startListeningToTouch","document","addEventListener","onScroll","autoFocus","focusInput","componentWillReceiveProps","nextProps","_props","inputValue","_selectValue","_menuOptions","_focusedValue","getNextFocusedValue","_focusedOption","getNextFocusedOption","focusable","setState","focusedOption","focusedValue","inputIsHiddenAfterUpdate","inputIsHidden","componentDidUpdate","prevProps","_props2","isFocused","menuListRef","focusedOptionRef","scrollToFocusedOptionOnUpdate","scrollIntoView","componentWillUnmount","stopListeningComposition","stopListeningToTouch","removeEventListener","onMenuOpen","onMenuClose","_props3","announceAriaLiveContext","event","context","onInputChange","action","newValue","actionMeta","inputRef","focus","blurInput","blur","openMenu","focusOption","_state","openAtIndex","selectedIndex","focusValue","direction","_props4","_state2","focusedIndex","lastIndex","nextFocus","_state3","getTheme","theme","defaultTheme","getCommonProps","clearValue","getStyles","setValue","selectOption","classNamePrefix","hasValue","getValue","cxPrefix","cx","classNames","selectProps","nextSelectValue","clearFocusValueOnUpdate","_state4","lastSelectValue","lastFocusedIndex","nextFocusedIndex","lastFocusedOption","hasOptions","render","countOptions","isClearable","_props5","option","isOptionSelected","_this2","candidate","some","formatOptionLabel","data","_inputValue","_selectValue2","onCompositionStart","onCompositionEnd","onTouchStart","onTouchMove","onTouchEnd","_this3","_props$inputValue","toOption","id","isSelected","label","shouldHideSelectedOptions","onHover","onOptionHover","onSelect","optionId","getElementId","innerProps","onClick","onMouseMove","onMouseOver","role","type","reduce","acc","item","itemIndex","hasGroups","items","children","map","child","push","filter","Boolean","groupId","constructAriaLiveMessage","_state5","ariaLiveContext","_props6","focusedValueMsg","valueFocusAriaMessage","focusedOptionMsg","optionFocusAriaMessage","resultsMsg","resultsAriaMessage","screenReaderMessage","renderInput","_props7","inputId","Input","createElement","DummyInput","innerRef","getInputRef","onBlur","onInputBlur","onChange","noop","onFocus","onInputFocus","readOnly","disabled","ariaAttributes","_commonProps","commonProps","autoCapitalize","autoComplete","autoCorrect","isHidden","handleInputChange","spellCheck","renderPlaceholderOrValue","_this4","_components","MultiValue","MultiValueContainer","MultiValueLabel","MultiValueRemove","SingleValue","Placeholder","_props8","_state6","selectValues","opt","Container","Label","Remove","removeProps","removeValue","onMouseDown","e","preventDefault","stopPropagation","singleValue","renderClearIndicator","ClearIndicator","_props9","onClearIndicatorMouseDown","onClearIndicatorTouchEnd","renderLoadingIndicator","LoadingIndicator","_props10","renderIndicatorSeparator","_components2","DropdownIndicator","IndicatorSeparator","renderDropdownIndicator","onDropdownIndicatorMouseDown","onDropdownIndicatorTouchEnd","renderMenu","_this5","_components3","Group","GroupHeading","Menu","MenuList","MenuPortal","LoadingMessage","NoOptionsMessage","Option","_state7","_props11","menuPortalTarget","onMenuScrollToTop","onMenuScrollToBottom","getFocusedOptionRef","menuUI","group","headingId","Heading","headingProps","message","_message","menuPlacementProps","menuElement","MenuPlacer","_ref2","ref","_ref2$placerProps","placerProps","placement","maxHeight","onMenuMouseDown","onMenuMouseMove","ScrollCaptor","isEnabled","onTopArrive","onBottomArrive","ScrollBlock","getMenuListRef","appendTo","controlElement","controlRef","renderFormField","_this6","_props12","delimiter","name","_value","join","input","_value2","renderLiveRegion","A11yText","ariaLiveSelection","_components4","Control","IndicatorsContainer","SelectContainer","ValueContainer","_props13","className","onKeyDown","getControlRef","onControlMouseDown","onControlTouchEnd","Component","_this7","isComposing","blockOptionHover","initialTouchX","initialTouchY","openAfterFocus","defaultComponents","_props14","_props15","_props16","_selectValue3","announceAriaLiveSelection","concat","removedValue","popValue","lastSelectedValue","slice","base","defaultStyles","boxSizing","custom","element","getActiveDescendentId","_state8","index","_ref3","valueEventAriaMessage","_ref4","instructionsAriaMessage","button","tagName","_props17","setTimeout","HTMLElement","isDocumentElement","_ref5","touches","touch","clientX","clientY","userIsDragging","_ref6","deltaX","Math","abs","deltaY","moveThreshold","contains","currentTarget","_props18","activeElement","_props19","hideSelectedOptions","_props20","_state9","defaultPrevented","shiftKey"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.defaultProps = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _memoizeOne = require('memoize-one');\n\nvar _memoizeOne2 = _interopRequireDefault(_memoizeOne);\n\nvar _Menu = require('./components/Menu');\n\nvar _reactFastCompare = require('./internal/react-fast-compare');\n\nvar _reactFastCompare2 = _interopRequireDefault(_reactFastCompare);\n\nvar _filters = require('./filters');\n\nvar _index = require('./internal/index');\n\nvar _index2 = require('./accessibility/index');\n\nvar _utils = require('./utils');\n\nvar _builtins = require('./builtins');\n\nvar _index3 = require('./components/index');\n\nvar _styles = require('./styles');\n\nvar _theme = require('./theme');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar defaultProps = exports.defaultProps = {\n  backspaceRemovesValue: true,\n  blurInputOnSelect: (0, _utils.isTouchCapable)(),\n  captureMenuScroll: !(0, _utils.isTouchCapable)(),\n  closeMenuOnSelect: true,\n  closeMenuOnScroll: false,\n  components: {},\n  controlShouldRenderValue: true,\n  escapeClearsValue: false,\n  filterOption: (0, _filters.createFilter)(),\n  formatGroupLabel: _builtins.formatGroupLabel,\n  getOptionLabel: _builtins.getOptionLabel,\n  getOptionValue: _builtins.getOptionValue,\n  isDisabled: false,\n  isLoading: false,\n  isMulti: false,\n  isRtl: false,\n  isSearchable: true,\n  isOptionDisabled: _builtins.isOptionDisabled,\n  loadingMessage: function loadingMessage() {\n    return 'Loading...';\n  },\n  maxMenuHeight: 300,\n  minMenuHeight: 140,\n  menuIsOpen: false,\n  menuPlacement: 'bottom',\n  menuPosition: 'absolute',\n  menuShouldBlockScroll: false,\n  menuShouldScrollIntoView: !(0, _utils.isMobileDevice)(),\n  noOptionsMessage: function noOptionsMessage() {\n    return 'No options';\n  },\n  openMenuOnFocus: false,\n  openMenuOnClick: true,\n  options: [],\n  pageSize: 5,\n  placeholder: 'Select...',\n  screenReaderStatus: function screenReaderStatus(_ref) {\n    var count = _ref.count;\n    return count + ' result' + (count !== 1 ? 's' : '') + ' available';\n  },\n  styles: {},\n  tabIndex: '0',\n  tabSelectsValue: true\n};\n\nvar instanceId = 1;\n\nvar Select = function (_Component) {\n  _inherits(Select, _Component);\n\n  // Lifecycle\n  // ------------------------------\n\n  // Refs\n  // ------------------------------\n\n  // Misc. Instance Properties\n  // ------------------------------\n\n  function Select(props) {\n    _classCallCheck(this, Select);\n\n    var _this = _possibleConstructorReturn(this, (Select.__proto__ || Object.getPrototypeOf(Select)).call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var value = props.value;\n\n    _this.cacheComponents = (0, _memoizeOne2.default)(_this.cacheComponents, _reactFastCompare2.default).bind(_this);\n    _this.cacheComponents(props.components);\n    _this.instancePrefix = 'react-select-' + (_this.props.instanceId || ++instanceId);\n\n    var selectValue = (0, _utils.cleanValue)(value);\n    var menuOptions = _this.buildMenuOptions(props, selectValue);\n\n    _this.state.menuOptions = menuOptions;\n    _this.state.selectValue = selectValue;\n    return _this;\n  } // TODO\n\n\n  _createClass(Select, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.startListeningComposition();\n      this.startListeningToTouch();\n\n      if (this.props.closeMenuOnScroll && document && document.addEventListener) {\n        // Listen to all scroll events, and filter them out inside of 'onScroll'\n        document.addEventListener('scroll', this.onScroll, true);\n      }\n\n      if (this.props.autoFocus) {\n        this.focusInput();\n      }\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var _props = this.props,\n          options = _props.options,\n          value = _props.value,\n          inputValue = _props.inputValue;\n      // re-cache custom components\n\n      this.cacheComponents(nextProps.components);\n      // rebuild the menu options\n      if (nextProps.value !== value || nextProps.options !== options || nextProps.inputValue !== inputValue) {\n        var _selectValue = (0, _utils.cleanValue)(nextProps.value);\n        var _menuOptions = this.buildMenuOptions(nextProps, _selectValue);\n        var _focusedValue = this.getNextFocusedValue(_selectValue);\n        var _focusedOption = this.getNextFocusedOption(_menuOptions.focusable);\n        this.setState({ menuOptions: _menuOptions, selectValue: _selectValue, focusedOption: _focusedOption, focusedValue: _focusedValue });\n      }\n      // some updates should toggle the state of the input visibility\n      if (this.inputIsHiddenAfterUpdate != null) {\n        this.setState({\n          inputIsHidden: this.inputIsHiddenAfterUpdate\n        });\n        delete this.inputIsHiddenAfterUpdate;\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      var _props2 = this.props,\n          isDisabled = _props2.isDisabled,\n          menuIsOpen = _props2.menuIsOpen;\n      var isFocused = this.state.isFocused;\n\n\n      if (\n      // ensure focus is restored correctly when the control becomes enabled\n      isFocused && !isDisabled && prevProps.isDisabled ||\n      // ensure focus is on the Input when the menu opens\n      isFocused && menuIsOpen && !prevProps.menuIsOpen) {\n        this.focusInput();\n      }\n\n      // scroll the focused option into view if necessary\n      if (this.menuListRef && this.focusedOptionRef && this.scrollToFocusedOptionOnUpdate) {\n        (0, _utils.scrollIntoView)(this.menuListRef, this.focusedOptionRef);\n      }\n      this.scrollToFocusedOptionOnUpdate = false;\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.stopListeningComposition();\n      this.stopListeningToTouch();\n      document.removeEventListener('scroll', this.onScroll, true);\n    }\n  }, {\n    key: 'onMenuOpen',\n\n    // ==============================\n    // Consumer Handlers\n    // ==============================\n\n    value: function onMenuOpen() {\n      this.props.onMenuOpen();\n    }\n  }, {\n    key: 'onMenuClose',\n    value: function onMenuClose() {\n      var _props3 = this.props,\n          isSearchable = _props3.isSearchable,\n          isMulti = _props3.isMulti;\n\n      this.announceAriaLiveContext({\n        event: 'input',\n        context: { isSearchable: isSearchable, isMulti: isMulti }\n      });\n      this.onInputChange('', { action: 'menu-close' });\n      this.props.onMenuClose();\n    }\n  }, {\n    key: 'onInputChange',\n    value: function onInputChange(newValue, actionMeta) {\n      this.props.onInputChange(newValue, actionMeta);\n    }\n\n    // ==============================\n    // Methods\n    // ==============================\n\n  }, {\n    key: 'focusInput',\n    value: function focusInput() {\n      if (!this.inputRef) return;\n      this.inputRef.focus();\n    }\n  }, {\n    key: 'blurInput',\n    value: function blurInput() {\n      if (!this.inputRef) return;\n      this.inputRef.blur();\n    }\n\n    // aliased for consumers\n\n  }, {\n    key: 'openMenu',\n    value: function openMenu(focusOption) {\n      var _state = this.state,\n          menuOptions = _state.menuOptions,\n          selectValue = _state.selectValue;\n      var isMulti = this.props.isMulti;\n\n      var openAtIndex = focusOption === 'first' ? 0 : menuOptions.focusable.length - 1;\n\n      if (!isMulti) {\n        var selectedIndex = menuOptions.focusable.indexOf(selectValue[0]);\n        if (selectedIndex > -1) {\n          openAtIndex = selectedIndex;\n        }\n      }\n\n      this.scrollToFocusedOptionOnUpdate = true;\n      this.inputIsHiddenAfterUpdate = false;\n\n      this.onMenuOpen();\n      this.setState({\n        focusedValue: null,\n        focusedOption: menuOptions.focusable[openAtIndex]\n      });\n\n      this.announceAriaLiveContext({ event: 'menu' });\n    }\n  }, {\n    key: 'focusValue',\n    value: function focusValue(direction) {\n      var _props4 = this.props,\n          isMulti = _props4.isMulti,\n          isSearchable = _props4.isSearchable;\n      var _state2 = this.state,\n          selectValue = _state2.selectValue,\n          focusedValue = _state2.focusedValue;\n\n      // Only multiselects support value focusing\n\n      if (!isMulti) return;\n\n      this.setState({\n        focusedOption: null\n      });\n\n      var focusedIndex = selectValue.indexOf(focusedValue);\n      if (!focusedValue) {\n        focusedIndex = -1;\n        this.announceAriaLiveContext({ event: 'value' });\n      }\n\n      var lastIndex = selectValue.length - 1;\n      var nextFocus = -1;\n      if (!selectValue.length) return;\n\n      switch (direction) {\n        case 'previous':\n          if (focusedIndex === 0) {\n            // don't cycle from the start to the end\n            nextFocus = 0;\n          } else if (focusedIndex === -1) {\n            // if nothing is focused, focus the last value first\n            nextFocus = lastIndex;\n          } else {\n            nextFocus = focusedIndex - 1;\n          }\n          break;\n        case 'next':\n          if (focusedIndex > -1 && focusedIndex < lastIndex) {\n            nextFocus = focusedIndex + 1;\n          }\n          break;\n      }\n\n      if (nextFocus === -1) {\n        this.announceAriaLiveContext({\n          event: 'input',\n          context: { isSearchable: isSearchable, isMulti: isMulti }\n        });\n      }\n\n      this.setState({\n        inputIsHidden: nextFocus === -1 ? false : true,\n        focusedValue: selectValue[nextFocus]\n      });\n    }\n  }, {\n    key: 'focusOption',\n    value: function focusOption() {\n      var direction = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'first';\n      var pageSize = this.props.pageSize;\n      var _state3 = this.state,\n          focusedOption = _state3.focusedOption,\n          menuOptions = _state3.menuOptions;\n\n      var options = menuOptions.focusable;\n\n      if (!options.length) return;\n      var nextFocus = 0; // handles 'first'\n      var focusedIndex = options.indexOf(focusedOption);\n      if (!focusedOption) {\n        focusedIndex = -1;\n        this.announceAriaLiveContext({ event: 'menu' });\n      }\n\n      if (direction === 'up') {\n        nextFocus = focusedIndex > 0 ? focusedIndex - 1 : options.length - 1;\n      } else if (direction === 'down') {\n        nextFocus = (focusedIndex + 1) % options.length;\n      } else if (direction === 'pageup') {\n        nextFocus = focusedIndex - pageSize;\n        if (nextFocus < 0) nextFocus = 0;\n      } else if (direction === 'pagedown') {\n        nextFocus = focusedIndex + pageSize;\n        if (nextFocus > options.length - 1) nextFocus = options.length - 1;\n      } else if (direction === 'last') {\n        nextFocus = options.length - 1;\n      }\n      this.scrollToFocusedOptionOnUpdate = true;\n      this.setState({\n        focusedOption: options[nextFocus],\n        focusedValue: null\n      });\n    }\n  }, {\n    key: 'getTheme',\n\n\n    // ==============================\n    // Getters\n    // ==============================\n\n    value: function getTheme() {\n      // Use the default theme if there are no customizations.\n      if (!this.props.theme) {\n        return _theme.defaultTheme;\n      }\n      // If the theme prop is a function, assume the function\n      // knows how to merge the passed-in default theme with\n      // its own modifications.\n      if (typeof this.props.theme === 'function') {\n        return this.props.theme(_theme.defaultTheme);\n      }\n      // Otherwise, if a plain theme object was passed in,\n      // overlay it with the default theme.\n      return _extends({}, _theme.defaultTheme, this.props.theme);\n    }\n  }, {\n    key: 'getCommonProps',\n    value: function getCommonProps() {\n      var clearValue = this.clearValue,\n          getStyles = this.getStyles,\n          setValue = this.setValue,\n          selectOption = this.selectOption,\n          props = this.props;\n      var classNamePrefix = props.classNamePrefix,\n          isMulti = props.isMulti,\n          isRtl = props.isRtl,\n          options = props.options;\n      var selectValue = this.state.selectValue;\n\n      var hasValue = this.hasValue();\n      var getValue = function getValue() {\n        return selectValue;\n      };\n      var cxPrefix = classNamePrefix;\n\n      var cx = _utils.classNames.bind(null, cxPrefix);\n      return {\n        cx: cx,\n        clearValue: clearValue,\n        getStyles: getStyles,\n        getValue: getValue,\n        hasValue: hasValue,\n        isMulti: isMulti,\n        isRtl: isRtl,\n        options: options,\n        selectOption: selectOption,\n        setValue: setValue,\n        selectProps: props,\n        theme: this.getTheme()\n      };\n    }\n  }, {\n    key: 'getNextFocusedValue',\n    value: function getNextFocusedValue(nextSelectValue) {\n      if (this.clearFocusValueOnUpdate) {\n        this.clearFocusValueOnUpdate = false;\n        return null;\n      }\n      var _state4 = this.state,\n          focusedValue = _state4.focusedValue,\n          lastSelectValue = _state4.selectValue;\n\n      var lastFocusedIndex = lastSelectValue.indexOf(focusedValue);\n      if (lastFocusedIndex > -1) {\n        var nextFocusedIndex = nextSelectValue.indexOf(focusedValue);\n        if (nextFocusedIndex > -1) {\n          // the focused value is still in the selectValue, return it\n          return focusedValue;\n        } else if (lastFocusedIndex < nextSelectValue.length) {\n          // the focusedValue is not present in the next selectValue array by\n          // reference, so return the new value at the same index\n          return nextSelectValue[lastFocusedIndex];\n        }\n      }\n      return null;\n    }\n  }, {\n    key: 'getNextFocusedOption',\n    value: function getNextFocusedOption(options) {\n      var lastFocusedOption = this.state.focusedOption;\n\n      return lastFocusedOption && options.indexOf(lastFocusedOption) > -1 ? lastFocusedOption : options[0];\n    }\n\n    // ==============================\n    // Helpers\n    // ==============================\n\n  }, {\n    key: 'hasValue',\n    value: function hasValue() {\n      var selectValue = this.state.selectValue;\n\n      return selectValue.length > 0;\n    }\n  }, {\n    key: 'hasOptions',\n    value: function hasOptions() {\n      return !!this.state.menuOptions.render.length;\n    }\n  }, {\n    key: 'countOptions',\n    value: function countOptions() {\n      return this.state.menuOptions.focusable.length;\n    }\n  }, {\n    key: 'isClearable',\n    value: function isClearable() {\n      var _props5 = this.props,\n          isClearable = _props5.isClearable,\n          isMulti = _props5.isMulti;\n\n      // single select, by default, IS NOT clearable\n      // multi select, by default, IS clearable\n\n      if (isClearable === undefined) return isMulti;\n\n      return isClearable;\n    }\n  }, {\n    key: 'isOptionDisabled',\n    value: function isOptionDisabled(option, selectValue) {\n      return typeof this.props.isOptionDisabled === 'function' ? this.props.isOptionDisabled(option, selectValue) : false;\n    }\n  }, {\n    key: 'isOptionSelected',\n    value: function isOptionSelected(option, selectValue) {\n      var _this2 = this;\n\n      if (selectValue.indexOf(option) > -1) return true;\n      if (typeof this.props.isOptionSelected === 'function') {\n        return this.props.isOptionSelected(option, selectValue);\n      }\n      var candidate = this.getOptionValue(option);\n      return selectValue.some(function (i) {\n        return _this2.getOptionValue(i) === candidate;\n      });\n    }\n  }, {\n    key: 'filterOption',\n    value: function filterOption(option, inputValue) {\n      return this.props.filterOption ? this.props.filterOption(option, inputValue) : true;\n    }\n  }, {\n    key: 'formatOptionLabel',\n    value: function formatOptionLabel(data, context) {\n      if (typeof this.props.formatOptionLabel === 'function') {\n        var _inputValue = this.props.inputValue;\n        var _selectValue2 = this.state.selectValue;\n\n        return this.props.formatOptionLabel(data, {\n          context: context,\n          inputValue: _inputValue,\n          selectValue: _selectValue2\n        });\n      } else {\n        return this.getOptionLabel(data);\n      }\n    }\n  }, {\n    key: 'formatGroupLabel',\n    value: function formatGroupLabel(data) {\n      return this.props.formatGroupLabel(data);\n    }\n\n    // ==============================\n    // Mouse Handlers\n    // ==============================\n\n  }, {\n    key: 'startListeningComposition',\n\n\n    // ==============================\n    // Composition Handlers\n    // ==============================\n\n    value: function startListeningComposition() {\n      if (document && document.addEventListener) {\n        document.addEventListener('compositionstart', this.onCompositionStart, false);\n        document.addEventListener('compositionend', this.onCompositionEnd, false);\n      }\n    }\n  }, {\n    key: 'stopListeningComposition',\n    value: function stopListeningComposition() {\n      if (document && document.removeEventListener) {\n        document.removeEventListener('compositionstart', this.onCompositionStart);\n        document.removeEventListener('compositionend', this.onCompositionEnd);\n      }\n    }\n  }, {\n    key: 'startListeningToTouch',\n\n\n    // ==============================\n    // Touch Handlers\n    // ==============================\n\n    value: function startListeningToTouch() {\n      if (document && document.addEventListener) {\n        document.addEventListener('touchstart', this.onTouchStart, false);\n        document.addEventListener('touchmove', this.onTouchMove, false);\n        document.addEventListener('touchend', this.onTouchEnd, false);\n      }\n    }\n  }, {\n    key: 'stopListeningToTouch',\n    value: function stopListeningToTouch() {\n      if (document && document.removeEventListener) {\n        document.removeEventListener('touchstart', this.onTouchStart);\n        document.removeEventListener('touchmove', this.onTouchMove);\n        document.removeEventListener('touchend', this.onTouchEnd);\n      }\n    }\n\n    // ==============================\n    // Focus Handlers\n    // ==============================\n\n    // ==============================\n    // Keyboard Handlers\n    // ==============================\n\n  }, {\n    key: 'buildMenuOptions',\n\n\n    // ==============================\n    // Menu Options\n    // ==============================\n\n    value: function buildMenuOptions(props, selectValue) {\n      var _this3 = this;\n\n      var _props$inputValue = props.inputValue,\n          inputValue = _props$inputValue === undefined ? '' : _props$inputValue,\n          options = props.options;\n\n\n      var toOption = function toOption(option, id) {\n        var isDisabled = _this3.isOptionDisabled(option, selectValue);\n        var isSelected = _this3.isOptionSelected(option, selectValue);\n        var label = _this3.getOptionLabel(option);\n        var value = _this3.getOptionValue(option);\n\n        if (_this3.shouldHideSelectedOptions() && isSelected || !_this3.filterOption({ label: label, value: value, data: option }, inputValue)) {\n          return;\n        }\n\n        var onHover = isDisabled ? undefined : function () {\n          return _this3.onOptionHover(option);\n        };\n        var onSelect = isDisabled ? undefined : function () {\n          return _this3.selectOption(option);\n        };\n        var optionId = _this3.getElementId('option') + '-' + id;\n\n        return {\n          innerProps: {\n            id: optionId,\n            onClick: onSelect,\n            onMouseMove: onHover,\n            onMouseOver: onHover,\n            role: 'option',\n            tabIndex: -1\n          },\n          data: option,\n          isDisabled: isDisabled,\n          isSelected: isSelected,\n          key: optionId,\n          label: label,\n          type: 'option',\n          value: value\n        };\n      };\n\n      return options.reduce(function (acc, item, itemIndex) {\n        if (item.options) {\n          // TODO needs a tidier implementation\n          if (!_this3.hasGroups) _this3.hasGroups = true;\n\n          var items = item.options;\n\n          var children = items.map(function (child, i) {\n            var option = toOption(child, itemIndex + '-' + i);\n            if (option && !option.isDisabled) acc.focusable.push(child);\n            return option;\n          }).filter(Boolean);\n          if (children.length) {\n            var groupId = _this3.getElementId('group') + '-' + itemIndex;\n            acc.render.push({\n              type: 'group',\n              key: groupId,\n              data: item,\n              options: children\n            });\n          }\n        } else {\n          var option = toOption(item, '' + itemIndex);\n          if (option) {\n            acc.render.push(option);\n            if (!option.isDisabled) acc.focusable.push(item);\n          }\n        }\n        return acc;\n      }, { render: [], focusable: [] });\n    }\n\n    // ==============================\n    // Renderers\n    // ==============================\n\n  }, {\n    key: 'constructAriaLiveMessage',\n    value: function constructAriaLiveMessage() {\n      var _state5 = this.state,\n          ariaLiveContext = _state5.ariaLiveContext,\n          selectValue = _state5.selectValue,\n          focusedValue = _state5.focusedValue,\n          focusedOption = _state5.focusedOption;\n      var _props6 = this.props,\n          options = _props6.options,\n          menuIsOpen = _props6.menuIsOpen,\n          inputValue = _props6.inputValue,\n          screenReaderStatus = _props6.screenReaderStatus;\n\n      // An aria live message representing the currently focused value in the select.\n\n      var focusedValueMsg = focusedValue ? (0, _index2.valueFocusAriaMessage)({\n        focusedValue: focusedValue,\n        getOptionLabel: this.getOptionLabel,\n        selectValue: selectValue\n      }) : '';\n      // An aria live message representing the currently focused option in the select.\n      var focusedOptionMsg = focusedOption && menuIsOpen ? (0, _index2.optionFocusAriaMessage)({\n        focusedOption: focusedOption,\n        getOptionLabel: this.getOptionLabel,\n        options: options\n      }) : '';\n      // An aria live message representing the set of focusable results and current searchterm/inputvalue.\n      var resultsMsg = (0, _index2.resultsAriaMessage)({\n        inputValue: inputValue,\n        screenReaderMessage: screenReaderStatus({ count: this.countOptions() })\n      });\n\n      return focusedValueMsg + ' ' + focusedOptionMsg + ' ' + resultsMsg + ' ' + ariaLiveContext;\n    }\n  }, {\n    key: 'renderInput',\n    value: function renderInput() {\n      var _props7 = this.props,\n          isDisabled = _props7.isDisabled,\n          isSearchable = _props7.isSearchable,\n          inputId = _props7.inputId,\n          inputValue = _props7.inputValue,\n          tabIndex = _props7.tabIndex;\n      var Input = this.components.Input;\n      var inputIsHidden = this.state.inputIsHidden;\n\n\n      var id = inputId || this.getElementId('input');\n\n      if (!isSearchable) {\n        // use a dummy input to maintain focus/blur functionality\n        return _react2.default.createElement(_index.DummyInput, {\n          id: id,\n          innerRef: this.getInputRef,\n          onBlur: this.onInputBlur,\n          onChange: _utils.noop,\n          onFocus: this.onInputFocus,\n          readOnly: true,\n          disabled: isDisabled,\n          tabIndex: tabIndex,\n          value: ''\n        });\n      }\n\n      // aria attributes makes the JSX \"noisy\", separated for clarity\n      var ariaAttributes = {\n        'aria-autocomplete': 'list',\n        'aria-label': this.props['aria-label'],\n        'aria-labelledby': this.props['aria-labelledby']\n      };\n\n      var _commonProps = this.commonProps,\n          cx = _commonProps.cx,\n          theme = _commonProps.theme,\n          selectProps = _commonProps.selectProps;\n\n\n      return _react2.default.createElement(Input, _extends({\n        autoCapitalize: 'none',\n        autoComplete: 'off',\n        autoCorrect: 'off',\n        cx: cx,\n        getStyles: this.getStyles,\n        id: id,\n        innerRef: this.getInputRef,\n        isDisabled: isDisabled,\n        isHidden: inputIsHidden,\n        onBlur: this.onInputBlur,\n        onChange: this.handleInputChange,\n        onFocus: this.onInputFocus,\n        selectProps: selectProps,\n        spellCheck: 'false',\n        tabIndex: tabIndex,\n        theme: theme,\n        type: 'text',\n        value: inputValue\n      }, ariaAttributes));\n    }\n  }, {\n    key: 'renderPlaceholderOrValue',\n    value: function renderPlaceholderOrValue() {\n      var _this4 = this;\n\n      var _components = this.components,\n          MultiValue = _components.MultiValue,\n          MultiValueContainer = _components.MultiValueContainer,\n          MultiValueLabel = _components.MultiValueLabel,\n          MultiValueRemove = _components.MultiValueRemove,\n          SingleValue = _components.SingleValue,\n          Placeholder = _components.Placeholder;\n      var commonProps = this.commonProps;\n      var _props8 = this.props,\n          controlShouldRenderValue = _props8.controlShouldRenderValue,\n          isDisabled = _props8.isDisabled,\n          isMulti = _props8.isMulti,\n          inputValue = _props8.inputValue,\n          placeholder = _props8.placeholder;\n      var _state6 = this.state,\n          selectValue = _state6.selectValue,\n          focusedValue = _state6.focusedValue,\n          isFocused = _state6.isFocused;\n\n\n      if (!this.hasValue() || !controlShouldRenderValue) {\n        return inputValue ? null : _react2.default.createElement(\n          Placeholder,\n          _extends({}, commonProps, {\n            key: 'placeholder',\n            isDisabled: isDisabled,\n            isFocused: isFocused\n          }),\n          placeholder\n        );\n      }\n\n      if (isMulti) {\n        var selectValues = selectValue.map(function (opt) {\n          var isFocused = opt === focusedValue;\n          return _react2.default.createElement(\n            MultiValue,\n            _extends({}, commonProps, {\n              components: {\n                Container: MultiValueContainer,\n                Label: MultiValueLabel,\n                Remove: MultiValueRemove\n              },\n              isFocused: isFocused,\n              isDisabled: isDisabled,\n              key: _this4.getOptionValue(opt),\n              removeProps: {\n                onClick: function onClick() {\n                  return _this4.removeValue(opt);\n                },\n                onTouchEnd: function onTouchEnd() {\n                  return _this4.removeValue(opt);\n                },\n                onMouseDown: function onMouseDown(e) {\n                  e.preventDefault();\n                  e.stopPropagation();\n                }\n              },\n              data: opt\n            }),\n            _this4.formatOptionLabel(opt, 'value')\n          );\n        });\n        return selectValues;\n      }\n\n      if (inputValue) {\n        return null;\n      }\n\n      var singleValue = selectValue[0];\n      return _react2.default.createElement(\n        SingleValue,\n        _extends({}, commonProps, { data: singleValue, isDisabled: isDisabled }),\n        this.formatOptionLabel(singleValue, 'value')\n      );\n    }\n  }, {\n    key: 'renderClearIndicator',\n    value: function renderClearIndicator() {\n      var ClearIndicator = this.components.ClearIndicator;\n      var commonProps = this.commonProps;\n      var _props9 = this.props,\n          isDisabled = _props9.isDisabled,\n          isLoading = _props9.isLoading;\n      var isFocused = this.state.isFocused;\n\n\n      if (!this.isClearable() || !ClearIndicator || isDisabled || !this.hasValue() || isLoading) {\n        return null;\n      }\n\n      var innerProps = {\n        onMouseDown: this.onClearIndicatorMouseDown,\n        onTouchEnd: this.onClearIndicatorTouchEnd,\n        'aria-hidden': 'true'\n      };\n\n      return _react2.default.createElement(ClearIndicator, _extends({}, commonProps, {\n        innerProps: innerProps,\n        isFocused: isFocused\n      }));\n    }\n  }, {\n    key: 'renderLoadingIndicator',\n    value: function renderLoadingIndicator() {\n      var LoadingIndicator = this.components.LoadingIndicator;\n      var commonProps = this.commonProps;\n      var _props10 = this.props,\n          isDisabled = _props10.isDisabled,\n          isLoading = _props10.isLoading;\n      var isFocused = this.state.isFocused;\n\n\n      if (!LoadingIndicator || !isLoading) return null;\n\n      var innerProps = { 'aria-hidden': 'true' };\n      return _react2.default.createElement(LoadingIndicator, _extends({}, commonProps, {\n        innerProps: innerProps,\n        isDisabled: isDisabled,\n        isFocused: isFocused\n      }));\n    }\n  }, {\n    key: 'renderIndicatorSeparator',\n    value: function renderIndicatorSeparator() {\n      var _components2 = this.components,\n          DropdownIndicator = _components2.DropdownIndicator,\n          IndicatorSeparator = _components2.IndicatorSeparator;\n\n      // separator doesn't make sense without the dropdown indicator\n\n      if (!DropdownIndicator || !IndicatorSeparator) return null;\n\n      var commonProps = this.commonProps;\n      var isDisabled = this.props.isDisabled;\n      var isFocused = this.state.isFocused;\n\n\n      return _react2.default.createElement(IndicatorSeparator, _extends({}, commonProps, {\n        isDisabled: isDisabled,\n        isFocused: isFocused\n      }));\n    }\n  }, {\n    key: 'renderDropdownIndicator',\n    value: function renderDropdownIndicator() {\n      var DropdownIndicator = this.components.DropdownIndicator;\n\n      if (!DropdownIndicator) return null;\n      var commonProps = this.commonProps;\n      var isDisabled = this.props.isDisabled;\n      var isFocused = this.state.isFocused;\n\n\n      var innerProps = {\n        onMouseDown: this.onDropdownIndicatorMouseDown,\n        onTouchEnd: this.onDropdownIndicatorTouchEnd,\n        'aria-hidden': 'true'\n      };\n\n      return _react2.default.createElement(DropdownIndicator, _extends({}, commonProps, {\n        innerProps: innerProps,\n        isDisabled: isDisabled,\n        isFocused: isFocused\n      }));\n    }\n  }, {\n    key: 'renderMenu',\n    value: function renderMenu() {\n      var _this5 = this;\n\n      var _components3 = this.components,\n          Group = _components3.Group,\n          GroupHeading = _components3.GroupHeading,\n          Menu = _components3.Menu,\n          MenuList = _components3.MenuList,\n          MenuPortal = _components3.MenuPortal,\n          LoadingMessage = _components3.LoadingMessage,\n          NoOptionsMessage = _components3.NoOptionsMessage,\n          Option = _components3.Option;\n      var commonProps = this.commonProps;\n      var _state7 = this.state,\n          focusedOption = _state7.focusedOption,\n          menuOptions = _state7.menuOptions;\n      var _props11 = this.props,\n          captureMenuScroll = _props11.captureMenuScroll,\n          inputValue = _props11.inputValue,\n          isLoading = _props11.isLoading,\n          loadingMessage = _props11.loadingMessage,\n          minMenuHeight = _props11.minMenuHeight,\n          maxMenuHeight = _props11.maxMenuHeight,\n          menuIsOpen = _props11.menuIsOpen,\n          menuPlacement = _props11.menuPlacement,\n          menuPosition = _props11.menuPosition,\n          menuPortalTarget = _props11.menuPortalTarget,\n          menuShouldBlockScroll = _props11.menuShouldBlockScroll,\n          menuShouldScrollIntoView = _props11.menuShouldScrollIntoView,\n          noOptionsMessage = _props11.noOptionsMessage,\n          onMenuScrollToTop = _props11.onMenuScrollToTop,\n          onMenuScrollToBottom = _props11.onMenuScrollToBottom;\n\n\n      if (!menuIsOpen) return null;\n\n      // TODO: Internal Option Type here\n      var render = function render(props) {\n        // for performance, the menu options in state aren't changed when the\n        // focused option changes so we calculate additional props based on that\n        var isFocused = focusedOption === props.data;\n        props.innerRef = isFocused ? _this5.getFocusedOptionRef : undefined;\n\n        return _react2.default.createElement(\n          Option,\n          _extends({}, commonProps, props, { isFocused: isFocused }),\n          _this5.formatOptionLabel(props.data, 'menu')\n        );\n      };\n\n      var menuUI = void 0;\n\n      if (this.hasOptions()) {\n        menuUI = menuOptions.render.map(function (item) {\n          if (item.type === 'group') {\n            var type = item.type,\n                group = _objectWithoutProperties(item, ['type']);\n\n            var headingId = item.key + '-heading';\n\n            return _react2.default.createElement(\n              Group,\n              _extends({}, commonProps, group, {\n                Heading: GroupHeading,\n                headingProps: {\n                  id: headingId\n                },\n                label: _this5.formatGroupLabel(item.data)\n              }),\n              item.options.map(function (option) {\n                return render(option);\n              })\n            );\n          } else if (item.type === 'option') {\n            return render(item);\n          }\n        });\n      } else if (isLoading) {\n        var message = loadingMessage({ inputValue: inputValue });\n        if (message === null) return null;\n        menuUI = _react2.default.createElement(\n          LoadingMessage,\n          commonProps,\n          message\n        );\n      } else {\n        var _message = noOptionsMessage({ inputValue: inputValue });\n        if (_message === null) return null;\n        menuUI = _react2.default.createElement(\n          NoOptionsMessage,\n          commonProps,\n          _message\n        );\n      }\n      var menuPlacementProps = {\n        minMenuHeight: minMenuHeight,\n        maxMenuHeight: maxMenuHeight,\n        menuPlacement: menuPlacement,\n        menuPosition: menuPosition,\n        menuShouldScrollIntoView: menuShouldScrollIntoView\n      };\n\n      var menuElement = _react2.default.createElement(\n        _Menu.MenuPlacer,\n        _extends({}, commonProps, menuPlacementProps),\n        function (_ref2) {\n          var ref = _ref2.ref,\n              _ref2$placerProps = _ref2.placerProps,\n              placement = _ref2$placerProps.placement,\n              maxHeight = _ref2$placerProps.maxHeight;\n          return _react2.default.createElement(\n            Menu,\n            _extends({}, commonProps, menuPlacementProps, {\n              innerRef: ref,\n              innerProps: {\n                onMouseDown: _this5.onMenuMouseDown,\n                onMouseMove: _this5.onMenuMouseMove\n              },\n              isLoading: isLoading,\n              placement: placement\n            }),\n            _react2.default.createElement(\n              _index.ScrollCaptor,\n              {\n                isEnabled: captureMenuScroll,\n                onTopArrive: onMenuScrollToTop,\n                onBottomArrive: onMenuScrollToBottom\n              },\n              _react2.default.createElement(\n                _index.ScrollBlock,\n                { isEnabled: menuShouldBlockScroll },\n                _react2.default.createElement(\n                  MenuList,\n                  _extends({}, commonProps, {\n                    innerRef: _this5.getMenuListRef,\n                    isLoading: isLoading,\n                    maxHeight: maxHeight\n                  }),\n                  menuUI\n                )\n              )\n            )\n          );\n        }\n      );\n\n      // positioning behaviour is almost identical for portalled and fixed,\n      // so we use the same component. the actual portalling logic is forked\n      // within the component based on `menuPosition`\n      return menuPortalTarget || menuPosition === 'fixed' ? _react2.default.createElement(\n        MenuPortal,\n        _extends({}, commonProps, {\n          appendTo: menuPortalTarget,\n          controlElement: this.controlRef,\n          menuPlacement: menuPlacement,\n          menuPosition: menuPosition\n        }),\n        menuElement\n      ) : menuElement;\n    }\n  }, {\n    key: 'renderFormField',\n    value: function renderFormField() {\n      var _this6 = this;\n\n      var _props12 = this.props,\n          delimiter = _props12.delimiter,\n          isDisabled = _props12.isDisabled,\n          isMulti = _props12.isMulti,\n          name = _props12.name;\n      var selectValue = this.state.selectValue;\n\n\n      if (!name || isDisabled) return;\n\n      if (isMulti) {\n        if (delimiter) {\n          var _value = selectValue.map(function (opt) {\n            return _this6.getOptionValue(opt);\n          }).join(delimiter);\n          return _react2.default.createElement('input', { name: name, type: 'hidden', value: _value });\n        } else {\n          var input = selectValue.length > 0 ? selectValue.map(function (opt, i) {\n            return _react2.default.createElement('input', {\n              key: 'i-' + i,\n              name: name,\n              type: 'hidden',\n              value: _this6.getOptionValue(opt)\n            });\n          }) : _react2.default.createElement('input', { name: name, type: 'hidden' });\n\n          return _react2.default.createElement(\n            'div',\n            null,\n            input\n          );\n        }\n      } else {\n        var _value2 = selectValue[0] ? this.getOptionValue(selectValue[0]) : '';\n        return _react2.default.createElement('input', { name: name, type: 'hidden', value: _value2 });\n      }\n    }\n  }, {\n    key: 'renderLiveRegion',\n    value: function renderLiveRegion() {\n      if (!this.state.isFocused) return null;\n      return _react2.default.createElement(\n        _index.A11yText,\n        { 'aria-live': 'assertive' },\n        _react2.default.createElement(\n          'p',\n          { id: 'aria-selection-event' },\n          '\\xA0',\n          this.state.ariaLiveSelection\n        ),\n        _react2.default.createElement(\n          'p',\n          { id: 'aria-context' },\n          '\\xA0',\n          this.constructAriaLiveMessage()\n        )\n      );\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _components4 = this.components,\n          Control = _components4.Control,\n          IndicatorsContainer = _components4.IndicatorsContainer,\n          SelectContainer = _components4.SelectContainer,\n          ValueContainer = _components4.ValueContainer;\n      var _props13 = this.props,\n          className = _props13.className,\n          id = _props13.id,\n          isDisabled = _props13.isDisabled,\n          menuIsOpen = _props13.menuIsOpen;\n      var isFocused = this.state.isFocused;\n\n\n      var commonProps = this.commonProps = this.getCommonProps();\n\n      return _react2.default.createElement(\n        SelectContainer,\n        _extends({}, commonProps, {\n          className: className,\n          innerProps: {\n            id: id,\n            onKeyDown: this.onKeyDown\n          },\n          isDisabled: isDisabled,\n          isFocused: isFocused\n        }),\n        this.renderLiveRegion(),\n        _react2.default.createElement(\n          Control,\n          _extends({}, commonProps, {\n            innerRef: this.getControlRef,\n            innerProps: {\n              onMouseDown: this.onControlMouseDown,\n              onTouchEnd: this.onControlTouchEnd\n            },\n            isDisabled: isDisabled,\n            isFocused: isFocused,\n            menuIsOpen: menuIsOpen\n          }),\n          _react2.default.createElement(\n            ValueContainer,\n            _extends({}, commonProps, { isDisabled: isDisabled }),\n            this.renderPlaceholderOrValue(),\n            this.renderInput()\n          ),\n          _react2.default.createElement(\n            IndicatorsContainer,\n            _extends({}, commonProps, { isDisabled: isDisabled }),\n            this.renderClearIndicator(),\n            this.renderLoadingIndicator(),\n            this.renderIndicatorSeparator(),\n            this.renderDropdownIndicator()\n          )\n        ),\n        this.renderMenu(),\n        this.renderFormField()\n      );\n    }\n  }]);\n\n  return Select;\n}(_react.Component);\n\nSelect.defaultProps = defaultProps;\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this7 = this;\n\n  this.state = {\n    ariaLiveSelection: '',\n    ariaLiveContext: '',\n    focusedOption: null,\n    focusedValue: null,\n    inputIsHidden: false,\n    isFocused: false,\n    isComposing: false,\n    menuOptions: { render: [], focusable: [] },\n    selectValue: []\n  };\n  this.blockOptionHover = false;\n  this.clearFocusValueOnUpdate = false;\n  this.hasGroups = false;\n  this.initialTouchX = 0;\n  this.initialTouchY = 0;\n  this.instancePrefix = '';\n  this.openAfterFocus = false;\n  this.scrollToFocusedOptionOnUpdate = false;\n  this.controlRef = null;\n\n  this.getControlRef = function (ref) {\n    _this7.controlRef = ref;\n  };\n\n  this.focusedOptionRef = null;\n\n  this.getFocusedOptionRef = function (ref) {\n    _this7.focusedOptionRef = ref;\n  };\n\n  this.menuListRef = null;\n\n  this.getMenuListRef = function (ref) {\n    _this7.menuListRef = ref;\n  };\n\n  this.inputRef = null;\n\n  this.getInputRef = function (ref) {\n    _this7.inputRef = ref;\n  };\n\n  this.cacheComponents = function (components) {\n    _this7.components = (0, _index3.defaultComponents)({ components: components });\n  };\n\n  this.focus = this.focusInput;\n  this.blur = this.blurInput;\n\n  this.onChange = function (newValue, actionMeta) {\n    var _props14 = _this7.props,\n        onChange = _props14.onChange,\n        name = _props14.name;\n\n    onChange(newValue, _extends({}, actionMeta, { name: name }));\n  };\n\n  this.setValue = function (newValue) {\n    var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'set-value';\n    var option = arguments[2];\n    var _props15 = _this7.props,\n        closeMenuOnSelect = _props15.closeMenuOnSelect,\n        isMulti = _props15.isMulti;\n\n    _this7.onInputChange('', { action: 'set-value' });\n    if (closeMenuOnSelect) {\n      _this7.inputIsHiddenAfterUpdate = !isMulti;\n      _this7.onMenuClose();\n    }\n    // when the select value should change, we should reset focusedValue\n    _this7.clearFocusValueOnUpdate = true;\n    _this7.onChange(newValue, { action: action, option: option });\n  };\n\n  this.selectOption = function (newValue) {\n    var _props16 = _this7.props,\n        blurInputOnSelect = _props16.blurInputOnSelect,\n        isMulti = _props16.isMulti;\n\n\n    if (isMulti) {\n      var _selectValue3 = _this7.state.selectValue;\n\n      if (_this7.isOptionSelected(newValue, _selectValue3)) {\n        var candidate = _this7.getOptionValue(newValue);\n        _this7.setValue(_selectValue3.filter(function (i) {\n          return _this7.getOptionValue(i) !== candidate;\n        }), 'deselect-option', newValue);\n        _this7.announceAriaLiveSelection({\n          event: 'deselect-option',\n          context: { value: _this7.getOptionLabel(newValue) }\n        });\n      } else {\n        _this7.setValue([].concat(_toConsumableArray(_selectValue3), [newValue]), 'select-option', newValue);\n        _this7.announceAriaLiveSelection({\n          event: 'select-option',\n          context: { value: _this7.getOptionLabel(newValue) }\n        });\n      }\n    } else {\n      _this7.setValue(newValue, 'select-option');\n      _this7.announceAriaLiveSelection({\n        event: 'select-option',\n        context: { value: _this7.getOptionLabel(newValue) }\n      });\n    }\n\n    if (blurInputOnSelect) {\n      _this7.blurInput();\n    }\n  };\n\n  this.removeValue = function (removedValue) {\n    var selectValue = _this7.state.selectValue;\n\n    var candidate = _this7.getOptionValue(removedValue);\n    _this7.onChange(selectValue.filter(function (i) {\n      return _this7.getOptionValue(i) !== candidate;\n    }), {\n      action: 'remove-value',\n      removedValue: removedValue\n    });\n    _this7.announceAriaLiveSelection({\n      event: 'remove-value',\n      context: {\n        value: removedValue ? _this7.getOptionLabel(removedValue) : undefined\n      }\n    });\n    _this7.focusInput();\n  };\n\n  this.clearValue = function () {\n    var isMulti = _this7.props.isMulti;\n\n    _this7.onChange(isMulti ? [] : null, { action: 'clear' });\n  };\n\n  this.popValue = function () {\n    var selectValue = _this7.state.selectValue;\n\n    var lastSelectedValue = selectValue[selectValue.length - 1];\n    _this7.announceAriaLiveSelection({\n      event: 'pop-value',\n      context: {\n        value: lastSelectedValue ? _this7.getOptionLabel(lastSelectedValue) : undefined\n      }\n    });\n    _this7.onChange(selectValue.slice(0, selectValue.length - 1), {\n      action: 'pop-value',\n      removedValue: lastSelectedValue\n    });\n  };\n\n  this.getOptionLabel = function (data) {\n    return _this7.props.getOptionLabel(data);\n  };\n\n  this.getOptionValue = function (data) {\n    return _this7.props.getOptionValue(data);\n  };\n\n  this.getStyles = function (key, props) {\n    var base = _styles.defaultStyles[key](props);\n    base.boxSizing = 'border-box';\n    var custom = _this7.props.styles[key];\n    return custom ? custom(base, props) : base;\n  };\n\n  this.getElementId = function (element) {\n    return _this7.instancePrefix + '-' + element;\n  };\n\n  this.getActiveDescendentId = function () {\n    var menuIsOpen = _this7.props.menuIsOpen;\n    var _state8 = _this7.state,\n        menuOptions = _state8.menuOptions,\n        focusedOption = _state8.focusedOption;\n\n\n    if (!focusedOption || !menuIsOpen) return undefined;\n\n    var index = menuOptions.focusable.indexOf(focusedOption);\n    var option = menuOptions.render[index];\n\n    return option && option.key;\n  };\n\n  this.announceAriaLiveSelection = function (_ref3) {\n    var event = _ref3.event,\n        context = _ref3.context;\n\n    _this7.setState({\n      ariaLiveSelection: (0, _index2.valueEventAriaMessage)(event, context)\n    });\n  };\n\n  this.announceAriaLiveContext = function (_ref4) {\n    var event = _ref4.event,\n        context = _ref4.context;\n\n    _this7.setState({\n      ariaLiveContext: (0, _index2.instructionsAriaMessage)(event, _extends({}, context, {\n        label: _this7.props['aria-label']\n      }))\n    });\n  };\n\n  this.onMenuMouseDown = function (event) {\n    if (event.button !== 0) {\n      return;\n    }\n    event.stopPropagation();\n    event.preventDefault();\n    _this7.focusInput();\n  };\n\n  this.onMenuMouseMove = function (event) {\n    _this7.blockOptionHover = false;\n  };\n\n  this.onControlMouseDown = function (event) {\n    var openMenuOnClick = _this7.props.openMenuOnClick;\n\n    if (!_this7.state.isFocused) {\n      if (openMenuOnClick) {\n        _this7.openAfterFocus = true;\n      }\n      _this7.focusInput();\n    } else if (!_this7.props.menuIsOpen) {\n      _this7.openMenu('first');\n    } else {\n      // $FlowFixMe HTMLElement type does not have tagName property\n      if (event.target.tagName !== 'INPUT') {\n        _this7.onMenuClose();\n      }\n    }\n    // $FlowFixMe HTMLElement type does not have tagName property\n    if (event.target.tagName !== 'INPUT') {\n      event.preventDefault();\n    }\n  };\n\n  this.onDropdownIndicatorMouseDown = function (event) {\n    // ignore mouse events that weren't triggered by the primary button\n    if (event && event.type === 'mousedown' && event.button !== 0) {\n      return;\n    }\n    if (_this7.props.isDisabled) return;\n    var _props17 = _this7.props,\n        isMulti = _props17.isMulti,\n        menuIsOpen = _props17.menuIsOpen;\n\n    _this7.focusInput();\n    if (menuIsOpen) {\n      _this7.inputIsHiddenAfterUpdate = !isMulti;\n      _this7.onMenuClose();\n    } else {\n      _this7.openMenu('first');\n    }\n    event.preventDefault();\n    event.stopPropagation();\n  };\n\n  this.onClearIndicatorMouseDown = function (event) {\n    // ignore mouse events that weren't triggered by the primary button\n    if (event && event.type === 'mousedown' && event.button !== 0) {\n      return;\n    }\n    _this7.clearValue();\n    event.stopPropagation();\n    _this7.openAfterFocus = false;\n    setTimeout(function () {\n      return _this7.focusInput();\n    });\n  };\n\n  this.onScroll = function (event) {\n    if (typeof _this7.props.closeMenuOnScroll === 'boolean') {\n      if (event.target instanceof HTMLElement && (0, _utils.isDocumentElement)(event.target)) {\n        _this7.props.onMenuClose();\n      }\n    } else if (typeof _this7.props.closeMenuOnScroll === 'function') {\n      if (_this7.props.closeMenuOnScroll(event)) {\n        _this7.props.onMenuClose();\n      }\n    }\n  };\n\n  this.onCompositionStart = function () {\n    _this7.setState({\n      isComposing: true\n    });\n  };\n\n  this.onCompositionEnd = function () {\n    _this7.setState({\n      isComposing: false\n    });\n  };\n\n  this.onTouchStart = function (_ref5) {\n    var touches = _ref5.touches;\n\n    var touch = touches.item(0);\n    if (!touch) {\n      return;\n    }\n\n    _this7.initialTouchX = touch.clientX;\n    _this7.initialTouchY = touch.clientY;\n    _this7.userIsDragging = false;\n  };\n\n  this.onTouchMove = function (_ref6) {\n    var touches = _ref6.touches;\n\n    var touch = touches.item(0);\n    if (!touch) {\n      return;\n    }\n\n    var deltaX = Math.abs(touch.clientX - _this7.initialTouchX);\n    var deltaY = Math.abs(touch.clientY - _this7.initialTouchY);\n    var moveThreshold = 5;\n\n    _this7.userIsDragging = deltaX > moveThreshold || deltaY > moveThreshold;\n  };\n\n  this.onTouchEnd = function (event) {\n    if (_this7.userIsDragging) return;\n\n    // type cast the EventTarget\n    var target = event.target;\n\n    // close the menu if the user taps outside\n    if (_this7.controlRef && !_this7.controlRef.contains(target) && _this7.menuListRef && !_this7.menuListRef.contains(target)) {\n      _this7.blurInput();\n    }\n\n    // reset move vars\n    _this7.initialTouchX = 0;\n    _this7.initialTouchY = 0;\n  };\n\n  this.onControlTouchEnd = function (event) {\n    if (_this7.userIsDragging) return;\n\n    _this7.onControlMouseDown(event);\n  };\n\n  this.onClearIndicatorTouchEnd = function (event) {\n    if (_this7.userIsDragging) return;\n\n    _this7.onClearIndicatorMouseDown(event);\n  };\n\n  this.onDropdownIndicatorTouchEnd = function (event) {\n    if (_this7.userIsDragging) return;\n\n    _this7.onDropdownIndicatorMouseDown(event);\n  };\n\n  this.handleInputChange = function (event) {\n    var inputValue = event.currentTarget.value;\n    _this7.inputIsHiddenAfterUpdate = false;\n    _this7.onInputChange(inputValue, { action: 'input-change' });\n    _this7.onMenuOpen();\n  };\n\n  this.onInputFocus = function (event) {\n    var _props18 = _this7.props,\n        isSearchable = _props18.isSearchable,\n        isMulti = _props18.isMulti;\n\n    if (_this7.props.onFocus) {\n      _this7.props.onFocus(event);\n    }\n    _this7.inputIsHiddenAfterUpdate = false;\n    _this7.announceAriaLiveContext({\n      event: 'input',\n      context: { isSearchable: isSearchable, isMulti: isMulti }\n    });\n    _this7.setState({\n      isFocused: true\n    });\n    if (_this7.openAfterFocus || _this7.props.openMenuOnFocus) {\n      _this7.openMenu('first');\n    }\n    _this7.openAfterFocus = false;\n  };\n\n  this.onInputBlur = function (event) {\n    if (_this7.menuListRef && _this7.menuListRef.contains(document.activeElement)) {\n      _this7.inputRef.focus();\n      return;\n    }\n    if (_this7.props.onBlur) {\n      _this7.props.onBlur(event);\n    }\n    _this7.onInputChange('', { action: 'input-blur' });\n    _this7.onMenuClose();\n    _this7.setState({\n      focusedValue: null,\n      isFocused: false\n    });\n  };\n\n  this.onOptionHover = function (focusedOption) {\n    if (_this7.blockOptionHover || _this7.state.focusedOption === focusedOption) {\n      return;\n    }\n    _this7.setState({ focusedOption: focusedOption });\n  };\n\n  this.shouldHideSelectedOptions = function () {\n    var _props19 = _this7.props,\n        hideSelectedOptions = _props19.hideSelectedOptions,\n        isMulti = _props19.isMulti;\n\n    if (hideSelectedOptions === undefined) return isMulti;\n    return hideSelectedOptions;\n  };\n\n  this.onKeyDown = function (event) {\n    var _props20 = _this7.props,\n        isMulti = _props20.isMulti,\n        backspaceRemovesValue = _props20.backspaceRemovesValue,\n        escapeClearsValue = _props20.escapeClearsValue,\n        inputValue = _props20.inputValue,\n        isClearable = _props20.isClearable,\n        isDisabled = _props20.isDisabled,\n        menuIsOpen = _props20.menuIsOpen,\n        onKeyDown = _props20.onKeyDown,\n        tabSelectsValue = _props20.tabSelectsValue,\n        openMenuOnFocus = _props20.openMenuOnFocus;\n    var _state9 = _this7.state,\n        isComposing = _state9.isComposing,\n        focusedOption = _state9.focusedOption,\n        focusedValue = _state9.focusedValue,\n        selectValue = _state9.selectValue;\n\n\n    if (isDisabled) return;\n\n    if (typeof onKeyDown === 'function') {\n      onKeyDown(event);\n      if (event.defaultPrevented) {\n        return;\n      }\n    }\n\n    // Block option hover events when the user has just pressed a key\n    _this7.blockOptionHover = true;\n    switch (event.key) {\n      case 'ArrowLeft':\n        if (!isMulti || inputValue) return;\n        _this7.focusValue('previous');\n        break;\n      case 'ArrowRight':\n        if (!isMulti || inputValue) return;\n        _this7.focusValue('next');\n        break;\n      case 'Delete':\n      case 'Backspace':\n        if (inputValue) return;\n        if (focusedValue) {\n          _this7.removeValue(focusedValue);\n        } else {\n          if (!backspaceRemovesValue) return;\n          if (isMulti) {\n            _this7.popValue();\n          } else if (isClearable) {\n            _this7.clearValue();\n          }\n        }\n        break;\n      case 'Tab':\n        if (isComposing) return;\n\n        if (event.shiftKey || !menuIsOpen || !tabSelectsValue || !focusedOption ||\n        // don't capture the event if the menu opens on focus and the focused\n        // option is already selected; it breaks the flow of navigation\n        openMenuOnFocus && _this7.isOptionSelected(focusedOption, selectValue)) {\n          return;\n        }\n        _this7.selectOption(focusedOption);\n        break;\n      case 'Enter':\n        if (menuIsOpen) {\n          if (!focusedOption) return;\n          if (isComposing) return;\n          _this7.selectOption(focusedOption);\n        } else {\n          _this7.focusOption('first');\n        }\n        break;\n      case 'Escape':\n        if (menuIsOpen) {\n          _this7.inputIsHiddenAfterUpdate = false;\n          _this7.onInputChange('', { action: 'menu-close' });\n          _this7.onMenuClose();\n        } else if (isClearable && escapeClearsValue) {\n          _this7.clearValue();\n        }\n        break;\n      case ' ':\n        // space\n        if (inputValue) {\n          return;\n        }\n        if (!menuIsOpen) {\n          _this7.openMenu('first');\n          break;\n        }\n        if (!focusedOption) return;\n        _this7.selectOption(focusedOption);\n        break;\n      case 'ArrowUp':\n        if (menuIsOpen) {\n          _this7.focusOption('up');\n        } else {\n          _this7.openMenu('last');\n        }\n        break;\n      case 'ArrowDown':\n        if (menuIsOpen) {\n          _this7.focusOption('down');\n        } else {\n          _this7.openMenu('first');\n        }\n        break;\n      case 'PageUp':\n        if (!menuIsOpen) return;\n        _this7.focusOption('pageup');\n        break;\n      case 'PageDown':\n        if (!menuIsOpen) return;\n        _this7.focusOption('pagedown');\n        break;\n      case 'Home':\n        if (!menuIsOpen) return;\n        _this7.focusOption('first');\n        break;\n      case 'End':\n        if (!menuIsOpen) return;\n        _this7.focusOption('last');\n        break;\n      default:\n        return;\n    }\n    event.preventDefault();\n  };\n};\n\nexports.default = Select;"]},"metadata":{},"sourceType":"script"}