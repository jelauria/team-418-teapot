{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __makeTemplateObject = this && this.__makeTemplateObject || function (cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n};\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  return t;\n};\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = __importStar(require(\"react\"));\n\nvar react_select_1 = __importStar(require(\"react-select\"));\n\nvar Async_1 = __importDefault(require(\"react-select/lib/Async\"));\n\nvar automation_attribute_1 = __importDefault(require(\"../../_helpers/automation-attribute\"));\n\nvar form_1 = __importDefault(require(\"../../molecules/form\"));\n\nvar styled_1 = __importDefault(require(\"../../styled\"));\n\nvar tokens_1 = require(\"../../tokens\");\n\nvar _simple_select_1 = __importDefault(require(\"../_simple-select\"));\n\nvar components_1 = require(\"./components\");\n\nvar defaultGetOptionValue = function (option) {\n  return option.value;\n};\n\nvar selectTheme = __assign({}, react_select_1.defaultTheme, {\n  colors: __assign({}, react_select_1.defaultTheme.colors, {\n    danger: tokens_1.colors.input.borderError,\n    primary: tokens_1.colors.input.borderFocus\n  }),\n  borderRadius: tokens_1.misc.radius,\n  spacing: {\n    menuGutter: 0,\n    baseUnit: tokens_1.spacing.unit,\n    controlHeight: tokens_1.misc.input.default.height\n  }\n});\n\nvar cosmosToReactSelect = {\n  options: function (cosmosOptions) {\n    return cosmosOptions.map(function (_a) {\n      var items = _a.items,\n          groupName = _a.groupName,\n          disabled = _a.disabled,\n          label = _a.label,\n          text = _a.text,\n          otherProperties = __rest(_a, [\"items\", \"groupName\", \"disabled\", \"label\", \"text\"]);\n\n      return __assign({\n        isDisabled: disabled,\n        label: groupName || label || text,\n        options: items ? cosmosToReactSelect.options(items) : undefined\n      }, otherProperties);\n    });\n  },\n  value: function (valueProp, options, getOptionValue) {\n    if (getOptionValue === void 0) {\n      getOptionValue = defaultGetOptionValue;\n    }\n\n    if (valueProp === null || typeof valueProp === \"undefined\") {\n      return null;\n    }\n\n    if (valueProp.constructor.name === \"Array\") {\n      return valueProp.map(function (item) {\n        return cosmosToReactSelect.value(item, options, getOptionValue);\n      });\n    }\n\n    var matchValue = function (option) {\n      return getOptionValue(option) === valueProp;\n    };\n\n    var valueFound = null;\n    options.forEach(function (option) {\n      if (option.options && option.options.constructor.name === \"Array\") {\n        option.options.forEach(function (subOption) {\n          if (matchValue(subOption)) {\n            valueFound = subOption;\n          }\n        });\n      }\n    });\n\n    if (valueFound !== null) {\n      return valueFound;\n    }\n\n    return options.find(matchValue);\n  },\n  styles: function (props) {\n    return {\n      menuPortal: components_1.Menu.portalTheme,\n      menu: components_1.Menu.theme,\n      groupHeading: components_1.GroupHeading.theme,\n      group: components_1.Group.theme,\n      menuList: components_1.MenuList.theme,\n      control: function (provided, state) {\n        return props.hasError ? __assign({}, provided, {\n          borderColor: tokens_1.colors.input.borderError,\n          boxShadow: \"0 0 0 \" + (state.isFocused ? 1 : 0) + \"px \" + tokens_1.colors.input.borderError,\n          \"&:hover\": {\n            borderColor: tokens_1.colors.input.borderError\n          },\n          \"&:focus\": {\n            borderColor: tokens_1.colors.input.borderError,\n            boxShadow: \"0 0 0 2px \" + tokens_1.colors.input.borderError\n          }\n        }) : provided;\n      }\n    };\n  }\n};\n\nvar oneOrMore = function (options, getOptionValue) {\n  if (getOptionValue === void 0) {\n    getOptionValue = defaultGetOptionValue;\n  }\n\n  if (options === null) {\n    return null;\n  }\n\n  if (options.constructor.name === \"Array\") {\n    return options.map(getOptionValue);\n  }\n\n  return getOptionValue(options);\n};\n\nvar Select = function (_super) {\n  __extends(Select, _super);\n\n  function Select(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.componentOverrides = {\n      SingleValue: react_select_1.components.SingleValue,\n      MultiValue: components_1.MultiValue,\n      DropdownIndicator: components_1.DropdownIndicator,\n      LoadingIndicator: components_1.LoadingIndicator,\n      ClearIndicator: components_1.ClearIndicator,\n      GroupHeading: components_1.GroupHeading,\n      Menu: components_1.Menu,\n      MenuList: components_1.MenuList,\n      Option: components_1.Option,\n      Group: components_1.Group,\n      IndicatorSeparator: function () {\n        return null;\n      }\n    };\n    _this.state = {\n      menuIsOpen: props.defaultMenuOpen || false\n    };\n    _this.handleScroll = _this.handleScroll.bind(_this);\n    return _this;\n  }\n\n  Select.prototype.componentDidMount = function () {\n    document.addEventListener(\"scroll\", this.handleScroll, true);\n\n    if (this.props.defaultMenuOpen) {\n      this.forceUpdate();\n    }\n  };\n\n  Select.prototype.componentWillUnmount = function () {\n    document.removeEventListener(\"scroll\", this.handleScroll, true);\n  };\n\n  Select.prototype.handleScroll = function () {\n    if (this.state.menuIsOpen) {\n      this.forceUpdate();\n    }\n  };\n\n  Select.prototype.updateMenuState = function (newState) {\n    var _this = this;\n\n    return function () {\n      return _this.setState({\n        menuIsOpen: newState\n      });\n    };\n  };\n\n  Select.prototype.render = function () {\n    var _this = this;\n\n    var props = this.props;\n\n    if (!(props.async || props.searchable || props.multiple || props.customOptionRenderer || props.customValueRenderer || props.getOptionValue)) {\n      return React.createElement(_simple_select_1.default, __assign({}, props));\n    }\n\n    var options = cosmosToReactSelect.options(props.options);\n    var defaultOptions = props.defaultOptions ? cosmosToReactSelect.options(props.defaultOptions) : null;\n\n    if (props.customOptionRenderer) {\n      this.componentOverrides.Option = components_1.optionRenderer(props.customOptionRenderer);\n    }\n\n    if (props.customValueRenderer) {\n      this.componentOverrides.SingleValue = components_1.valueRenderer(props.customValueRenderer);\n    }\n\n    var value = props.async ? props.value : cosmosToReactSelect.value(props.value, options, props.getOptionValue);\n    var styles = cosmosToReactSelect.styles(props);\n    var searchable = props.async || props.searchable;\n    var noOptionsMessage = props.noOptionsMessage ? typeof props.noOptionsMessage === \"function\" ? props.noOptionsMessage : function () {\n      return props.noOptionsMessage;\n    } : function () {\n      return \"No options\";\n    };\n    var SelectProvider = props.async ? Async_1.default : react_select_1.default;\n\n    var onChange = function (options) {\n      var newValue = props.async ? options : oneOrMore(options, props.getOptionValue);\n\n      if (props.onChange) {\n        props.onChange({\n          target: {\n            name: props.name,\n            value: newValue\n          }\n        });\n      }\n    };\n\n    return React.createElement(Select.Wrapper, __assign({}, automation_attribute_1.default(\"select.wrapper\"), {\n      style: props.style\n    }), React.createElement(form_1.default.Field.ContextConsumer, null, function (context) {\n      return React.createElement(SelectProvider, {\n        onChange: onChange,\n        onFocus: props.onFocus,\n        onBlur: props.onBlur,\n        isClearable: true,\n        isDisabled: props.disabled,\n        isMulti: props.multiple,\n        isSearchable: searchable,\n        isLoading: props.loading,\n        onMenuOpen: _this.updateMenuState(true),\n        onMenuClose: _this.updateMenuState(false),\n        menuPortalTarget: !!document ? document.body : null,\n        menuIsOpen: props.defaultMenuOpen,\n        defaultValue: props.defaultValue,\n        getOptionValue: props.getOptionValue,\n        placeholder: props.placeholder,\n        options: options,\n        loadOptions: props.loadOptions,\n        components: _this.componentOverrides,\n        noOptionsMessage: noOptionsMessage,\n        defaultOptions: defaultOptions,\n        theme: selectTheme,\n        autoFocus: props.autoFocus,\n        name: props.name,\n        value: value,\n        styles: styles,\n        key: value ? value.length : 0,\n        id: props.id || context.formFieldId\n      });\n    }));\n  };\n\n  Select.Wrapper = styled_1.default.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\"], [\"\"])));\n  Select.defaultProps = {\n    options: [],\n    placeholder: \"\",\n    searchable: false\n  };\n  return Select;\n}(React.Component);\n\nexports.default = Select;\nvar templateObject_1;","map":{"version":3,"sources":["../../../../../atoms/select/select.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n            t[p[i]] = s[p[i]];\n    return t;\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __importStar(require(\"react\"));\nvar react_select_1 = __importStar(require(\"react-select\"));\nvar Async_1 = __importDefault(require(\"react-select/lib/Async\"));\nvar automation_attribute_1 = __importDefault(require(\"../../_helpers/automation-attribute\"));\nvar form_1 = __importDefault(require(\"../../molecules/form\"));\nvar styled_1 = __importDefault(require(\"../../styled\"));\nvar tokens_1 = require(\"../../tokens\");\nvar _simple_select_1 = __importDefault(require(\"../_simple-select\"));\nvar components_1 = require(\"./components\");\nvar defaultGetOptionValue = function (option) { return option.value; };\nvar selectTheme = __assign({}, react_select_1.defaultTheme, { colors: __assign({}, react_select_1.defaultTheme.colors, { danger: tokens_1.colors.input.borderError, primary: tokens_1.colors.input.borderFocus }), borderRadius: tokens_1.misc.radius, spacing: {\n        menuGutter: 0,\n        baseUnit: tokens_1.spacing.unit,\n        controlHeight: tokens_1.misc.input.default.height\n    } });\nvar cosmosToReactSelect = {\n    options: function (cosmosOptions) {\n        return cosmosOptions.map(function (_a) {\n            var items = _a.items, groupName = _a.groupName, disabled = _a.disabled, label = _a.label, text = _a.text, otherProperties = __rest(_a, [\"items\", \"groupName\", \"disabled\", \"label\", \"text\"]);\n            return (__assign({ isDisabled: disabled, label: groupName || label || text, options: items ? cosmosToReactSelect.options(items) : undefined }, otherProperties));\n        });\n    },\n    value: function (valueProp, options, getOptionValue) {\n        if (getOptionValue === void 0) { getOptionValue = defaultGetOptionValue; }\n        if (valueProp === null || typeof valueProp === \"undefined\") {\n            return null;\n        }\n        if (valueProp.constructor.name === \"Array\") {\n            return valueProp.map(function (item) { return cosmosToReactSelect.value(item, options, getOptionValue); });\n        }\n        var matchValue = function (option) { return getOptionValue(option) === valueProp; };\n        var valueFound = null;\n        options.forEach(function (option) {\n            if (option.options && option.options.constructor.name === \"Array\") {\n                option.options.forEach(function (subOption) {\n                    if (matchValue(subOption)) {\n                        valueFound = subOption;\n                    }\n                });\n            }\n        });\n        if (valueFound !== null) {\n            return valueFound;\n        }\n        return options.find(matchValue);\n    },\n    styles: function (props) { return ({\n        menuPortal: components_1.Menu.portalTheme,\n        menu: components_1.Menu.theme,\n        groupHeading: components_1.GroupHeading.theme,\n        group: components_1.Group.theme,\n        menuList: components_1.MenuList.theme,\n        control: function (provided, state) {\n            return props.hasError\n                ? __assign({}, provided, { borderColor: tokens_1.colors.input.borderError, boxShadow: \"0 0 0 \" + (state.isFocused ? 1 : 0) + \"px \" + tokens_1.colors.input.borderError, \"&:hover\": {\n                        borderColor: tokens_1.colors.input.borderError\n                    }, \"&:focus\": {\n                        borderColor: tokens_1.colors.input.borderError,\n                        boxShadow: \"0 0 0 2px \" + tokens_1.colors.input.borderError\n                    } }) : provided;\n        }\n    }); }\n};\nvar oneOrMore = function (options, getOptionValue) {\n    if (getOptionValue === void 0) { getOptionValue = defaultGetOptionValue; }\n    if (options === null) {\n        return null;\n    }\n    if (options.constructor.name === \"Array\") {\n        return options.map(getOptionValue);\n    }\n    return getOptionValue(options);\n};\nvar Select = (function (_super) {\n    __extends(Select, _super);\n    function Select(props) {\n        var _this = _super.call(this, props) || this;\n        _this.componentOverrides = {\n            SingleValue: react_select_1.components.SingleValue,\n            MultiValue: components_1.MultiValue,\n            DropdownIndicator: components_1.DropdownIndicator,\n            LoadingIndicator: components_1.LoadingIndicator,\n            ClearIndicator: components_1.ClearIndicator,\n            GroupHeading: components_1.GroupHeading,\n            Menu: components_1.Menu,\n            MenuList: components_1.MenuList,\n            Option: components_1.Option,\n            Group: components_1.Group,\n            IndicatorSeparator: function () { return null; }\n        };\n        _this.state = { menuIsOpen: props.defaultMenuOpen || false };\n        _this.handleScroll = _this.handleScroll.bind(_this);\n        return _this;\n    }\n    Select.prototype.componentDidMount = function () {\n        document.addEventListener(\"scroll\", this.handleScroll, true);\n        if (this.props.defaultMenuOpen) {\n            this.forceUpdate();\n        }\n    };\n    Select.prototype.componentWillUnmount = function () {\n        document.removeEventListener(\"scroll\", this.handleScroll, true);\n    };\n    Select.prototype.handleScroll = function () {\n        if (this.state.menuIsOpen) {\n            this.forceUpdate();\n        }\n    };\n    Select.prototype.updateMenuState = function (newState) {\n        var _this = this;\n        return function () { return _this.setState({ menuIsOpen: newState }); };\n    };\n    Select.prototype.render = function () {\n        var _this = this;\n        var props = this.props;\n        if (!(props.async ||\n            props.searchable ||\n            props.multiple ||\n            props.customOptionRenderer ||\n            props.customValueRenderer ||\n            props.getOptionValue)) {\n            return React.createElement(_simple_select_1.default, __assign({}, props));\n        }\n        var options = cosmosToReactSelect.options(props.options);\n        var defaultOptions = props.defaultOptions ? cosmosToReactSelect.options(props.defaultOptions) : null;\n        if (props.customOptionRenderer) {\n            this.componentOverrides.Option = components_1.optionRenderer(props.customOptionRenderer);\n        }\n        if (props.customValueRenderer) {\n            this.componentOverrides.SingleValue = components_1.valueRenderer(props.customValueRenderer);\n        }\n        var value = props.async ? props.value : cosmosToReactSelect.value(props.value, options, props.getOptionValue);\n        var styles = cosmosToReactSelect.styles(props);\n        var searchable = props.async || props.searchable;\n        var noOptionsMessage = props.noOptionsMessage\n            ? typeof props.noOptionsMessage === \"function\"\n                ? props.noOptionsMessage\n                : function () { return props.noOptionsMessage; }\n            : function () { return \"No options\"; };\n        var SelectProvider = props.async ? Async_1.default : react_select_1.default;\n        var onChange = function (options) {\n            var newValue = props.async ? options : oneOrMore(options, props.getOptionValue);\n            if (props.onChange) {\n                props.onChange({ target: { name: props.name, value: newValue } });\n            }\n        };\n        return (React.createElement(Select.Wrapper, __assign({}, automation_attribute_1.default(\"select.wrapper\"), { style: props.style }),\n            React.createElement(form_1.default.Field.ContextConsumer, null, function (context) { return (React.createElement(SelectProvider, { onChange: onChange, onFocus: props.onFocus, onBlur: props.onBlur, isClearable: true, isDisabled: props.disabled, isMulti: props.multiple, isSearchable: searchable, isLoading: props.loading, onMenuOpen: _this.updateMenuState(true), onMenuClose: _this.updateMenuState(false), menuPortalTarget: !!document ? document.body : null, menuIsOpen: props.defaultMenuOpen, defaultValue: props.defaultValue, getOptionValue: props.getOptionValue, placeholder: props.placeholder, options: options, loadOptions: props.loadOptions, components: _this.componentOverrides, noOptionsMessage: noOptionsMessage, defaultOptions: defaultOptions, theme: selectTheme, autoFocus: props.autoFocus, name: props.name, value: value, styles: styles, key: value ? value.length : 0, id: props.id || context.formFieldId })); })));\n    };\n    Select.Wrapper = styled_1.default.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\"], [\"\"])));\n    Select.defaultProps = {\n        options: [],\n        placeholder: \"\",\n        searchable: false\n    };\n    return Select;\n}(React.Component));\nexports.default = Select;\nvar templateObject_1;\n//# sourceMappingURL=select.js.map"]},"metadata":{},"sourceType":"script"}